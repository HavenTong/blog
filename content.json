{"pages":[{"title":"","text":"","link":"/404.html"},{"title":"About","text":"The essential thing is not to have conquered but to have fought well.","link":"/about/index.html"},{"title":"Archives","text":"","link":"/archive/index.html"},{"title":"Tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"FIRST AK","text":"çºªå¿µä¸€ä¸‹äººç”Ÿç¬¬ä¸€æ¬¡AK: åç»­é¢˜è§£ä¼šå°½å¿«è¡¥å……","link":"/2020/05/16/FIRST-AK/"},{"title":"C++-priority_queue","text":"C+Â±priority_queue C++ STL-priority_queue ç”¨æ³• priority_queueå­˜åœ¨äºå¤´æ–‡ä»¶&lt;queue&gt;ä¸­ï¼Œä»¥ä¸‹ä»£ç è§£é‡Šäº†è¯¥å®¹å™¨å¦‚ä½•ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116#include &lt;cstdio&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;algorithm&gt;#include &lt;queue&gt;#include &lt;vector&gt;using namespace std;struct Node{ int a,b; Node(){} Node(int aa,int bb):a(aa),b(bb){} // äºŒçº§æ’åºï¼Œaç›¸åŒæ—¶æŒ‰ç…§bå‡åºæ’åºï¼Œå¦åˆ™æŒ‰ç…§aå‡åºæ’åº // (a,b): (1,1)&lt;(1,2)&lt;(2,1)&lt;(2,2) // è¿™é‡Œé‡è½½çš„å¤§äºå·å’Œå°äºå·åœ¨é€»è¾‘ä¸Šç­‰ä»· bool operator &lt; (const Node &amp;r) const{ if(a==r.a) return b&lt;r.b; else return a&lt;r.a; } bool operator &gt; (const Node &amp;r) const{ if(a==r.a) return b&gt;r.b; else return a&gt;r.a; }};int main(){ //priority_queue æ˜¯åŸºäºå †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ— // .size()è¿”å›å½“å‰ä¼˜å…ˆé˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•° // empty()ä¸ºtrueè¡¨ç¤ºå½“å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œfalseè¡¨ç¤ºä¸ç©º priority_queue&lt;int&gt; tmp_q; cout&lt;&lt;tmp_q.size()&lt;&lt;endl; //0 cout&lt;&lt;tmp_q.empty()&lt;&lt;endl; //1 tmp_q.push(1); cout&lt;&lt;tmp_q.size()&lt;&lt;endl; //1 cout&lt;&lt;tmp_q.empty()&lt;&lt;endl; //0 tmp_q.pop(); cout&lt;&lt;tmp_q.size()&lt;&lt;endl; //0 cout&lt;&lt;tmp_q.empty()&lt;&lt;endl; //1 // priority_queue&lt;int&gt; è¡¨ç¤ºé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ æ˜¯intç±»å‹ï¼ˆSTLæ¨¡æ¿ç±»ï¼‰ // é»˜è®¤priority_queueè¡¨ç¤ºé˜Ÿåˆ—æŒ‰ç…§lesså‡ºé˜Ÿ // åå‡ºé˜Ÿçš„å…ƒç´ æ¯”å…ˆå‡ºé˜Ÿçš„å…ƒç´ è¦å°ï¼Œå‡ºé˜Ÿçš„å…ƒç´ è¶Šæ¥è¶Šå°ï¼Œæ‰€ä»¥æ˜¯less // push åŠ å…¥å…ƒç´  // top è¿”å›é˜Ÿé¦–å…ƒç´  // pop é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿ priority_queue&lt;int&gt; q; q.push(5); q.push(6); cout&lt;&lt;q.top()&lt;&lt;endl; //6 q.pop(); cout&lt;&lt;q.top()&lt;&lt;endl; //5 q.pop(); // greater è¡¨ç¤ºåå‡ºé˜Ÿçš„å…ƒç´ æ¯”å…ˆå‡ºé˜Ÿçš„å…ƒç´ è¦å¤§, å‡ºé˜Ÿçš„å…ƒç´ è¶Šæ¥è¶Šå¤§ï¼Œæ‰€ä»¥æ˜¯greater priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; q_greater; // &lt;&gt;ä¸­ç¬¬äºŒä¸ªå‚æ•°vector&lt;int&gt;è¡¨ç¤ºä¼˜å…ˆé˜Ÿåˆ—ä¸­ä½¿ç”¨vector&lt;int&gt; å­˜å‚¨å…ƒç´ ï¼Œå¯ä»¥æ›´æ¢æˆdeque // ç¬¬äºŒä¸ªå‚æ•°ä¸­æ›´æ¢çš„å…¶ä»–ç±»å‹åº”æ”¯æŒ.begin(),.end(),.push(),.pop()ç­‰æ“ä½œ // ç»å¤§å¤šæ•°æƒ…å†µéƒ½ä½¿ç”¨vector&lt;&gt;ï¼Œæå°‘éœ€è¦æ›´æ¢ // ä¾‹å­ï¼špriority_queue&lt;int, deque&lt;int&gt;, greater&lt;int&gt;&gt; q_greater; q_greater.push(5); q_greater.push(6); cout&lt;&lt;q_greater.top()&lt;&lt;endl; //5 q_greater.pop(); cout&lt;&lt;q_greater.top()&lt;&lt;endl; //6 q_greater.pop(); // æ›´æ¢ä¸ºdoubleç±»å‹ï¼Œå‡ºé˜Ÿæ³•åˆ™æ˜¯less priority_queue&lt;double, vector&lt;double&gt;, less&lt;double&gt;&gt; q_less; q_less.push(5.2); q_less.push(6.6); cout&lt;&lt;q_less.top()&lt;&lt;endl; //6.6 q_less.pop(); cout&lt;&lt;q_less.top()&lt;&lt;endl; //5.2 q_less.pop(); // è‡ªå®šä¹‰ç±»Nodeçš„priority_queue ä½¿ç”¨greateréœ€è¦å¯¹å…ƒç´ é‡è½½å¤§äºå· priority_queue&lt;Node, vector&lt;Node&gt;, greater&lt;Node&gt;&gt; q_greater_node; q_greater_node.push(Node(1,1)); q_greater_node.push(Node(1,2)); q_greater_node.push(Node(2,1)); q_greater_node.push(Node(2,2)); cout&lt;&lt;q_greater_node.top().a&lt;&lt;\" \"&lt;&lt;q_greater_node.top().b&lt;&lt;endl; // 1 1 q_greater_node.pop(); cout&lt;&lt;q_greater_node.top().a&lt;&lt;\" \"&lt;&lt;q_greater_node.top().b&lt;&lt;endl; // 1 2 q_greater_node.pop(); cout&lt;&lt;q_greater_node.top().a&lt;&lt;\" \"&lt;&lt;q_greater_node.top().b&lt;&lt;endl; // 2 1 q_greater_node.pop(); cout&lt;&lt;q_greater_node.top().a&lt;&lt;\" \"&lt;&lt;q_greater_node.top().b&lt;&lt;endl; // 2 2 q_greater_node.pop(); // è‡ªå®šä¹‰ç±»Nodeçš„priority_queue ä½¿ç”¨lesséœ€è¦å¯¹å…ƒç´ é‡è½½å°äºå· priority_queue&lt;Node, vector&lt;Node&gt;, less&lt;Node&gt;&gt; q_less_node; q_less_node.push(Node(1,1)); q_less_node.push(Node(1,2)); q_less_node.push(Node(2,1)); q_less_node.push(Node(2,2)); cout&lt;&lt;q_less_node.top().a&lt;&lt;\" \"&lt;&lt;q_less_node.top().b&lt;&lt;endl; // 2 2 q_less_node.pop(); cout&lt;&lt;q_less_node.top().a&lt;&lt;\" \"&lt;&lt;q_less_node.top().b&lt;&lt;endl; // 2 1 q_less_node.pop(); cout&lt;&lt;q_less_node.top().a&lt;&lt;\" \"&lt;&lt;q_less_node.top().b&lt;&lt;endl; // 1 2 q_less_node.pop(); cout&lt;&lt;q_less_node.top().a&lt;&lt;\" \"&lt;&lt;q_less_node.top().b&lt;&lt;endl; // 1 1 q_less_node.pop(); return 0;}","link":"/2019/11/18/C++-priority-queue/"},{"title":"HappyNewYear","text":"Happy New Year ä»Šå¹´çš„æœ€å10åˆ†é’Ÿï¼Œåˆæ˜¯è‡ªå·±ç‹¬è‡ªé¢å¯¹ç€ç”µè„‘ã€‚ æ²¡æœ‰ä»€ä¹ˆåˆ«çš„æ„¿æœ›ï¼Œåªæ˜¯å¸Œæœ›2020å¹´åˆ«å†åƒ2019è¿™ä¹ˆçƒ‚äº†ã€‚ â€‹ 2019.12.31 23:55","link":"/2019/12/31/HappyNewYear/"},{"title":"Happy Birthday","text":"Happy Birthday to myself! Hope the goal will finally be achieved!","link":"/2020/06/27/Happy-Birthday/"},{"title":"Machine Learning-Concepts","text":"Machine Learning-Concepts 1. æ•°æ® å¤§å†™å­—æ¯è¡¨ç¤ºä¸¾è¯ï¼Œå¤§å†™å­—æ¯è¡¨ç¤ºå‘é‡ æ•°æ®æ•´ä½“å«æ•°æ®é›†(data set) æ¯ä¸€è¡Œæ•°æ®ç§°ä¸ºä¸€ä¸ªæ ·æœ¬(sample) æ¯ä¸€ä¸ªå­—æ®µè¡¨è¾¾æ ·æœ¬çš„ä¸€ä¸ªç‰¹å¾(feature) ç¬¬iä¸ªæ ·æœ¬å†™ä½œ $ X^{(i)} $ ï¼Œç¬¬iä¸ªæ ·æœ¬ç¬¬jä¸ªç‰¹å¾å€¼å†™ä½œ $X^{(i)}_j $ å­¦ä¹ çš„ä»»åŠ¡ï¼šæ ‡è®°(label), è¡¨ç¤ºä¸º $ y $, ç¬¬ $i$ ä¸ªæ ·æœ¬çš„æ ‡è®°å†™ä½œ $ y^{ (i) } $ ç¬¬ $i$ è¡Œï¼Œä¹Ÿå°±æ˜¯ç¬¬ $i$ ä¸ªæ ·æœ¬ï¼Œä¹Ÿè¢«ç§°ä½œç‰¹å¾å‘é‡ $ X^{ (i) } $ $$ X^{(i)} = \\left( \\begin{matrix} 5.1 \\ 3.5 \\ 1.4 \\ 0.2 \\end{matrix} \\right) $$ æ•°å­¦ä¸­é€šå¸¸æŠŠå‘é‡è¡¨ç¤ºæˆåˆ—å‘é‡ï¼Œæ‰€ä»¥é€šå¸¸ç‰¹å¾å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹çš„å½¢å¼: $$ \\left( \\begin{matrix} (X^{ (1)} )^T \\ (X^{ (2)} )^T \\ (X^{ (3)} )^T \\end{matrix} \\right) $$ æ‰€æœ‰ç‰¹å¾æ‰€å­˜åœ¨çš„ç©ºé—´ï¼Œç§°ä¸ºç‰¹å¾ç©ºé—´(feature space) åˆ†ç±»ä»»åŠ¡çš„æœ¬è´¨å°±æ˜¯ç‰¹å¾ç©ºé—´çš„åˆ’åˆ† åœ¨é«˜ç»´ç©ºé—´åŒç† ç‰¹å¾å¯ä»¥å¾ˆæŠ½è±¡ å›¾åƒä¸­ï¼Œæ¯ä¸€ä¸ªåƒç´ ç‚¹éƒ½æ˜¯ç‰¹å¾ï¼Œe.g. 28 * 28çš„å›¾åƒå°±æœ‰28 * 28 = 784ä¸ªç‰¹å¾ å¦‚æœå½©è‰²å›¾åƒç‰¹å¾æ›´å¤š 2. åŸºæœ¬ä»»åŠ¡ ç›‘ç£å­¦ä¹ ä¸»è¦å¤„ç†åˆ†ç±»å’Œå›å½’é—®é¢˜ åˆ†ç±» äºŒåˆ†ç±» åˆ¤æ–­é‚®ä»¶æ˜¯å¦æ˜¯åƒåœ¾é‚®ä»¶ åˆ¤æ–­å‘æ”¾ç»™å®¢æˆ·ä¿¡ç”¨å¡æ˜¯å¦æœ‰é£é™© åˆ¤æ–­è‚¿ç˜¤æ˜¯æ¶æ€§è¿˜æ˜¯è‰¯æ€§ åˆ¤æ–­è‚¡ç¥¨æ¶¨è·Œ å¤šåˆ†ç±» æ•°å­—è¯†åˆ« å›¾åƒè¯†åˆ« åˆ¤æ–­å‘æ”¾ç»™å®¢æˆ·çš„ä¿¡ç”¨å¡çš„é£é™©è¯„çº§ å¾ˆå¤šå¤æ‚çš„é—®é¢˜å¯ä»¥è½¬æ¢æˆå¤šåˆ†ç±»é—®é¢˜ ä¸€äº›ç®—æ³•åªæ”¯æŒäºŒåˆ†ç±»çš„ä»»åŠ¡ï¼Œä½†å¤šåˆ†ç±»çš„ä»»åŠ¡å¯ä»¥è½¬æ¢æˆäºŒåˆ†ç±»çš„ä»»åŠ¡ ä¸€äº›ç®—æ³•å¤©ç„¶å¯ä»¥å®Œæˆå¤šåˆ†ç±»ä»»åŠ¡ å¤šæ ‡ç­¾åˆ†ç±» e.g. å¯¹å›¾ç‰‡ä¸­çš„å…ƒç´ è¿›è¡Œåˆ’åˆ† å›å½’ ç»“æœæ˜¯ä¸€ä¸ªè¿ç»­æ•°å­—çš„å€¼ï¼Œè€Œéä¸€ä¸ªç±»åˆ« æˆ¿å±‹ä»·æ ¼ å¸‚åœºåˆ†æ å­¦ç”Ÿæˆç»© è‚¡ç¥¨ä»·æ ¼ æœ‰ä¸€äº›ç®—æ³•åªèƒ½è§£å†³å›å½’é—®é¢˜ï¼Œæœ‰ä¸€äº›ç®—æ³•åªèƒ½è§£å†³åˆ†ç±»é—®é¢˜ï¼Œæœ‰ä¸€äº›ç®—æ³•éƒ½å¯ä»¥è§£å†³ ä¸€äº›æƒ…å†µä¸‹ï¼Œå›å½’ä»»åŠ¡å¯ä»¥ç®€åŒ–ä¸ºåˆ†ç±»ä»»åŠ¡ æµç¨‹ æ¨¡å‹ $f(x)$ 3. æœºå™¨å­¦ä¹ åˆ†ç±» ç›‘ç£å­¦ä¹  ç»™æœºå™¨çš„è®­ç»ƒæ•°æ®æ‹¥æœ‰&quot;æ ‡è®°&quot;or&quot;ç­”æ¡ˆ&quot; å›¾ç‰‡å·²ç»æ‹¥æœ‰äº†æ ‡å®šä¿¡æ¯ é“¶è¡Œå·²ç»ç§¯ç´¯äº†ä¸€å®šçš„å®¢æˆ·ä¿¡æ¯å’Œä»–ä»¬ä¿¡ç”¨å¡çš„ä¿¡ç”¨æƒ…å†µ åŒ»é™¢å·²ç»ç§¯ç´¯äº†ä¸€å®šçš„ç—…äººä¿¡æ¯å’Œä»–ä»¬æœ€ç»ˆç¡®è¯Šæ˜¯å¦æ‚£ç—…çš„æƒ…å†µ å¸‚åœºç§¯ç´¯äº†æˆ¿å±‹çš„åŸºæœ¬ä¿¡æ¯å’Œæœ€ç»ˆæˆäº¤çš„é‡‘é¢ éç›‘ç£å­¦ä¹  ç»™æœºå™¨çš„è®­ç»ƒæ•°æ®æ²¡æœ‰ä»»ä½•&quot;æ ‡è®°&quot;æˆ–è€…â€œç­”æ¡ˆâ€ å¯¹æ²¡æœ‰&quot;æ ‡è®°&quot;çš„æ•°æ®è¿›è¡Œåˆ†ç±»-èšç±»åˆ†æ æ„ä¹‰ å¯¹æ•°æ®è¿›è¡Œé™ç»´å¤„ç† ç‰¹å¾æå–ï¼šä¿¡ç”¨å¡çš„ä¿¡ç”¨è¯„çº§å’Œäººçš„èƒ–ç˜¦æ— å…³ï¼Ÿ ç‰¹å¾å‹ç¼©(ç‰¹å¾ä¹‹é—´å…³ç³»å¾ˆå¼º)ï¼šPCA é™ç»´å¤„ç†å¯ä»¥æ–¹ä¾¿å¯è§†åŒ– å¼‚å¸¸æ£€æµ‹ åŠç›‘ç£å­¦ä¹  ä¸€éƒ¨åˆ†æ•°æ®æ ‡æœ‰&quot;æ ‡è®°&quot;æˆ–è€…&quot;ç­”æ¡ˆ&quot;ï¼Œå¦ä¸€éƒ¨åˆ†æ•°æ®æ²¡æœ‰ æ›´å¸¸è§ï¼šå„ç§åŸå› äº§ç”Ÿçš„æ ‡è®°ç¼ºå¤± é€šå¸¸éƒ½å…ˆä½¿ç”¨æ— ç›‘ç£å­¦ä¹ æ‰‹æ®µå¯¹æ•°æ®åšå¤„ç†ï¼Œä¹‹åä½¿ç”¨ç›‘ç£å­¦ä¹ æ‰‹æ®µåšæ¨¡å‹çš„è®­ç»ƒå’Œé¢„æµ‹ å¢å¼ºå­¦ä¹  æ ¹æ®å‘¨å›´ç¯å¢ƒçš„æƒ…å†µï¼Œé‡‡å–è¡ŒåŠ¨ï¼Œæ ¹æ®é‡‡å–è¡ŒåŠ¨çš„ç»“æœï¼Œå­¦ä¹ è¡ŒåŠ¨æ–¹å¼ è¡ŒåŠ¨-åé¦ˆ å¥–èµæˆ–æƒ©ç½šæœºåˆ¶ 4. æœºå™¨å­¦ä¹ çš„å…¶ä»–åˆ†ç±» æ‰¹é‡å­¦ä¹ (Batch Learning) ä¼˜ç‚¹ï¼šç®€å• é—®é¢˜ï¼šå¦‚ä½•é€‚åº”ç¯å¢ƒå˜åŒ–ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šå®šæ—¶é‡æ–°æ‰¹é‡å­¦ä¹  ç¼ºç‚¹ï¼šæ¯æ¬¡é‡æ–°æ‰¹é‡å­¦ä¹ ï¼Œè¿ç®—é‡å·¨å¤§ï¼›åŒæ—¶ï¼Œåœ¨æŸäº›ç¯å¢ƒå˜åŒ–éå¸¸å¿«çš„æƒ…å†µä¸‹ï¼Œç”šè‡³ä¸å¯èƒ½ åœ¨çº¿å­¦ä¹ (Online Learning) è¾“å…¥æ ·ä¾‹å’Œæ­£ç¡®ç»“æœè¿­ä»£è¿›å…¥æœºå™¨å­¦ä¹ ç®—æ³• ä¼˜ç‚¹ï¼šåŠæ—¶åæ˜ æ–°çš„ç¯å¢ƒå˜åŒ– é—®é¢˜ï¼šæ–°çš„æ•°æ®å¸¦æ¥ä¸å¥½çš„å˜åŒ–ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šéœ€è¦åŠ å¼ºå¯¹æ•°æ®è¿›è¡Œç›‘æ§ å…¶ä»–ï¼šä¹Ÿé€‚ç”¨äºæ•°æ®é‡å·¨å¤§ï¼Œæ— æ³•å®Œå…¨æ‰¹é‡å­¦ä¹ çš„ç¯å¢ƒ å‚æ•°å­¦ä¹ (Parametric Learning) e.g. å‡è®¾æ¨¡å‹å®šä¸º $f(x) = ax + b$ï¼Œé‚£ä¹ˆæœºå™¨å­¦ä¹ çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°åˆé€‚çš„ $a$ å’Œ $b$ ç‰¹ç‚¹ï¼šä¸€æ—¦å­¦åˆ°äº†å‚æ•°ï¼Œå°±ä¸å†éœ€è¦åŸæœ‰çš„æ•°æ®é›† éå‚æ•°å­¦ä¹ (Nonparametric Learning) ä¸å¯¹æ¨¡å‹è¿›è¡Œè¿‡å¤šå‡è®¾ éå‚æ•°ä¸ä»£è¡¨æ²¡æœ‰å‚æ•°","link":"/2020/02/09/Machine-Learning-Concepts/"},{"title":"MongoDBåŸºç¡€","text":"MongoDBåŸºç¡€ 123brew services start mongodb-community@4.2brew services stop mongodb-community@4.2 1. åŸºæœ¬æ¦‚å¿µ é›†åˆ é›†åˆç±»ä¼¼äºæ•°ç»„ï¼Œåœ¨é›†åˆä¸­å¯ä»¥å­˜æ”¾æ–‡æ¡£ æ–‡æ¡£ æ–‡æ¡£æ˜¯æ–‡æ¡£æ•°æ®åº“çš„æœ€å°å•å…ƒï¼Œæˆ‘ä»¬æ“ä½œå’Œå­˜å‚¨çš„å†…å®¹éƒ½æ˜¯æ–‡æ¡£ åœ¨MongoDBä¸­æ•°æ®åº“å’Œé›†åˆéƒ½ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º å½“åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œå¦‚æœæ–‡æ¡£æ‰€åœ¨çš„é›†åˆæˆ–æ•°æ®åº“ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆå’Œæ•°æ®åº“ 2. åŸºæœ¬æŒ‡ä»¤ show dbs æ˜¾ç¤ºå½“å‰æ‰€æœ‰æ•°æ®åº“ use [db names] è¿›å…¥åˆ°æŒ‡å®šçš„æ•°æ®åº“ä¸­ db è¡¨ç¤ºå½“å‰æ‰€å¤„çš„æ•°æ®åº“ show collections æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€å­˜åœ¨çš„é›†åˆ 3. CRUD (1) æ’å…¥æ–‡æ¡£ db.&lt;collection&gt;.insert() å‘é›†åˆä¸­æ’å…¥1ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£ å‘testæ•°æ®åº“ä¸­çš„ stus é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å­¦ç”Ÿå¯¹è±¡ {name: &quot;å­™æ‚Ÿç©º&quot;, age: 18, gender: &quot;male&quot;} 12345db.stus.insert({ name: \"å­™æ‚Ÿç©º\", age: 18, gender: \"male\"}) å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š_idå±æ€§ï¼Œåˆ™æ•°æ®åº“ä¼šç”¨ObjectID()è‡ªåŠ¨ä¸ºæ–‡æ¡£æ·»åŠ _idï¼Œæ”¹å±æ€§ä½œä¸ºæ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ã€‚ å¯ä»¥è‡ªå·±å±æ€§_idï¼Œæ•°æ®åº“å°±ä¸ä¼šå†æ·»åŠ ï¼›å¦‚æœè‡ªå·±æŒ‡å®šï¼Œä¹Ÿå¿…é¡»ç¡®ä¿å”¯ä¸€æ€§ db.&lt;collection&gt;.insertOne() db.&lt;collection&gt;.insertMany() (2) æŸ¥è¯¢æ–‡æ¡£ db.&lt;collection&gt;.find() æŸ¥è¯¢é›†åˆä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ find()å¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ¡ä»¶ find({})ä¹Ÿè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£ {å­—æ®µå: å€¼}ï¼š æŸ¥è¯¢å­—æ®µæ˜¯æŒ‡å®šå€¼çš„æ–‡æ¡£ find()è¿”å›æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥ç”¨[]ç´¢å¼• db.&lt;collection&gt;.findOne() æŸ¥è¯¢é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£ findOne()è¿”å›çš„æ˜¯ä¸€ä¸ªæ–‡æ¡£ db.&lt;collection&gt;.find().count() / db.&lt;collection&gt;.find().length MongoDBæ”¯æŒé€šè¿‡å†…åµŒæ–‡æ¡£çš„å±æ€§æŸ¥è¯¢ï¼Œå¦‚æœè¦æŸ¥è¯¢å†…åµŒæ–‡æ¡£ï¼Œé€šè¿‡.æ¥åŒ¹é…ï¼›å¦‚æœè¦é€šè¿‡å†…åµŒæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢ï¼Œæ­¤æ—¶å±æ€§åå¿…é¡»ä½¿ç”¨å¼•å· 123db.users.find({ \"hobby.movies\": \"hero\"}); .limit()å¯ä»¥è®¾ç½®æ˜¾ç¤ºæ•°æ®çš„ä¸Šé™ åˆ†é¡µæ•°æ®æ˜¾ç¤º .skip((é¡µç -1) * æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°).limit(æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°) .skip()ç”¨äºè·³è¿‡æŒ‡å®šæ•°é‡çš„æ•°æ® MongoDBä¼šè‡ªåŠ¨è°ƒæ•´skip()å’Œlimit()çš„ä½ç½® (3) ä¿®æ”¹æ–‡æ¡£ db.&lt;collection&gt;.update(æŸ¥è¯¢æ¡ä»¶ï¼Œæ–°å¯¹è±¡) é»˜è®¤æƒ…å†µä¸‹ç”¨æ–°å¯¹è±¡æ›¿æ¢æ—§å¯¹è±¡ 12//æ›¿æ¢db.stus.update({name: \"haven\"}, {age: 28}) å¦‚æœéœ€è¦ä¿®æ”¹æŒ‡å®šå±æ€§ï¼Œè€Œä¸æ˜¯æ›¿æ¢ï¼Œéœ€è¦ä½¿ç”¨ä¿®æ”¹æ“ä½œç¬¦ $set å¯ä»¥ç”¨æ¥ä¿®æ”¹æ–‡æ¡£ä¸­çš„æŒ‡å®šå±æ€§ 12345678db.stus.update( {\"_id\" : ObjectId(\"5da96ae4298c2eb5254c4588\")}, {$set:{ gender: \"male\", address: \"liu sha he\" } }) $unset å¯ä»¥ç”¨æ¥åˆ é™¤æ–‡æ¡£çš„æŒ‡å®šå±æ€§ update()é»˜è®¤æƒ…å†µåªæ”¹ä¸€ä¸ª db.&lt;collection&gt;.updateMany() åŒæ—¶ä¿®æ”¹å¤šä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ db.&lt;collection&gt;.updateOne() æ›´æ–°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ db.&lt;collection&gt;.replaceOne() æ›¿æ¢ä¸€ä¸ªæ–‡æ¡£ $push: å‘æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´  $addToSet: å‘æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¸”æ²¡æœ‰é‡å¤ (4) åˆ é™¤æ–‡æ¡£ db.&lt;collection&gt;.remove() å¯ä»¥æ ¹æ®æ¡ä»¶æ¥åˆ é™¤æ–‡æ¡£ï¼Œä¼ é€’çš„æ¡ä»¶çš„æ–¹å¼å’Œfind()ä¸€æ · é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ é™¤ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ–‡æ¡£ å¦‚æœremove()ç¬¬äºŒä¸ªå‚æ•°ä¸ºtrueï¼Œåˆ™åªä¼šåˆ é™¤ä¸€ä¸ª å¦‚æœåªä¼ é€’ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œåˆ™åˆ é™¤å…¨éƒ¨æ–‡æ¡£ db.&lt;collection&gt;.deleteOne() db.&lt;collection&gt;.deleteMany() db.&lt;collection&gt;.drop() åˆ é™¤æ•´ä¸ªé›†åˆ db.dropDatabase()","link":"/2019/10/22/MongoDB%E5%9F%BA%E7%A1%80/"},{"title":"New Theme","text":"æ›´æ–°äº†Blogçš„Themeä¸ºIcarus:","link":"/2020/05/21/New-Theme/"},{"title":"STL Notes","text":"STLå®¹å™¨å…±æ€§ STLå®¹å™¨æ‰€æä¾›çš„éƒ½æ˜¯å€¼å¯“æ„ï¼Œè€Œéå¼•ç”¨å¯“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬å‘å®¹å™¨æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå®¹å™¨å†…éƒ¨å®æ–½äº†æ‹·è´åŠ¨ä½œï¼Œå°†æˆ‘ä»¬è¦æ’å…¥çš„å…ƒç´ å†å¦è¡Œæ‹·è´ä¸€ä»½æ”¾å…¥åˆ°å®¹å™¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æä¾›çš„å…ƒç´ å¿…é¡»èƒ½å¤Ÿæ‹·è´ã€‚ è‹¥æœ‰æŒ‡é’ˆï¼Œéœ€è¦å†™æ‹·è´æ„é€ ï¼Œé‡è½½ç­‰å· é™¤äº†queueå’Œstackä¹‹å¤–ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æä¾›å¯è¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œè¿ç”¨è¿”å›çš„è¿­ä»£å™¨å°±å¯ä»¥è®¿é—®å…ƒç´ ã€‚ é€šå¸¸STLä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ä½¿ç”¨è€…ä¼ å…¥æ­£ç¡®å‚æ•°ã€‚ æ¯ä¸ªå®¹å™¨éƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°å’Œé»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ã€‚ å¤§å°ç›¸å…³çš„æ„é€ æ–¹æ³•ï¼š size()è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•° empty()åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºç©º STLå®¹å™¨ä½¿ç”¨æ—¶æœº vector deque list set multiset map multimap å…¸å‹å†…å­˜ç»“æ„ å•ç«¯æ•°ç»„ åŒç«¯æ•°ç»„ åŒå‘é“¾è¡¨ äºŒå‰æ ‘ äºŒå‰æ ‘ äºŒå‰æ ‘ äºŒå‰æ ‘ å¯éšæœºå­˜å– æ˜¯ æ˜¯ å¦ å¦ å¦ å¯¹keyè€Œè¨€ï¼Œæ˜¯ å¦ å…ƒç´ æœå¯»é€Ÿåº¦ æ…¢ æ…¢ éå¸¸æ…¢ å¿« å¿« å¯¹keyè€Œè¨€ï¼Œå¿« å¯¹keyè€Œè¨€ï¼Œå¿« å…ƒç´ å®‰æ’ç§»é™¤ å°¾ç«¯ å¤´å°¾ä¸¤ç«¯ ä»»ä½•ä½ç½® - - - - ä½¿ç”¨åœºæ™¯ vector è½¯ä»¶å†å²æ“ä½œæ•°æ®çš„å­˜å‚¨ï¼Œç»å¸¸æŸ¥çœ‹å†å²è®°å½•ï¼Œä½†ä¸ä¼šåˆ é™¤è®°å½•ã€‚ deque æ’é˜Ÿè´­ç¥¨ç³»ç»Ÿï¼Œæ’é˜Ÿè€…çš„å­˜å‚¨å¯ä»¥é‡‡ç”¨dequeï¼Œæ”¯æŒå¤´éƒ¨å¿«é€Ÿç§»é™¤ï¼Œå°¾ç«¯å¿«é€Ÿæ·»åŠ ã€‚å¦‚æœé‡‡ç”¨vectorï¼Œå¤´éƒ¨ç§»é™¤ä¼šç§»åŠ¨å¤§é‡æ•°æ®ï¼Œé€Ÿåº¦æ…¢ã€‚ vector v.s. deque vector.at()æ¯”deque.at()æ•ˆç‡é«˜ï¼švector.at(0)æ˜¯å›ºå®šçš„ï¼Œdequeçš„å¼€å§‹ä½ç½®æ˜¯ä¸å›ºå®šçš„ å¦‚æœæœ‰å¤§é‡é‡Šæ”¾æ“ä½œæ—¶ï¼ŒvectorèŠ±çš„æ—¶é—´æ›´å°‘ dequeæ”¯æŒå¤´éƒ¨çš„å¿«é€Ÿæ’å…¥ä¸ç§»é™¤ list å…¬äº¤è½¦ä¹˜å®¢çš„å­˜å‚¨ï¼Œéšæ—¶å¯èƒ½æœ‰ä¹˜å®¢ä¸‹è½¦ï¼Œæ”¯æŒé¢‘ç¹çš„ä¸ç¡®å®šä½ç½®å…ƒç´ çš„ç§»é™¤å’Œæ’å…¥ set å¯¹æ‰‹æœºæ¸¸æˆçš„ä¸ªäººå¾—åˆ†çºªå½•çš„å­˜å‚¨ï¼Œå­˜å‚¨è¦æ±‚ä»é«˜åˆ†åˆ°ä½åˆ†çš„é¡ºåºæ’åˆ— map æŒ‰IDå·å­˜å‚¨åä¸‡ä¸ªç”¨æˆ·ï¼Œæƒ³è¦å¿«é€Ÿé€šè¿‡IDæŸ¥æ‰¾å¯¹åº”çš„ç”¨æˆ·ã€‚åˆ©ç”¨äºŒå‰æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ã€‚","link":"/2019/07/18/STL-Notes/"},{"title":"STL-map","text":"STL-map è¿‘æ—¥åšé¢˜ç”¨åˆ°äº†C++ä¸­STLçš„mapå®¹å™¨ï¼Œåœ¨æ¶‰åŠmapçš„æ’åºè¿‡ç¨‹æ—¶ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ’åº Sort by key Sort by value ä¸ºäº†åŠ æ·±è¿™ä¸¤ç§æ’åºæ–¹å¼çš„å†™æ³•ï¼Œæˆ‘åˆå†™äº†ä¸€ä¸ªdemoæ¥æ¢³ç†ä¸¤ç§æ’åºæ–¹å¼çš„å†™æ³• mapçš„å‚æ•° 12345template &lt; class Key, // map::å…³é”®å­—ç±»å‹ class T, // map::å€¼ç±»å‹ class Compare = less&lt;Key&gt;, // map::å…³é”®å­—æ¯”è¾ƒå‡½æ•° class Alloc = allocator&lt;pair&lt;const Key,T&gt; &gt; // map::allocatorç±» &gt; class map; Sort by key å‡åº é»˜è®¤æƒ…å†µä¸‹ï¼ŒmapæŒ‰ç…§keyçš„å¤§å°å‡åºæ’åºï¼Œå³less&lt;Key&gt; 12345678910111213141516void show(map&lt;string, int&gt;&amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout &lt;&lt; it -&gt; first &lt;&lt; \" \" &lt;&lt; it -&gt; second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;} map&lt;string, int&gt; asc_map;asc_map[\"boss\"] = 2;asc_map[\"abuse\"] = 1;asc_map[\"unit\"] = 3;asc_map[\"duty\"] = 4;// mapé»˜è®¤æŒ‰ç…§keyçš„å¤§å°å‡åºæ’åˆ—, å³ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºless&lt;string&gt;cout &lt;&lt; \"ğŸš€ DEFAULT: \" &lt;&lt; endl;show(asc_map); æ‰€ä»¥æ‰“å°ç»“æœå¦‚ä¸‹: 123456ğŸš€ DEFAULT: abuse 1boss 2duty 4unit 3================================ é™åº æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹mapçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ¥æ”¹å˜æ’åºè§„åˆ™ï¼Œä½¿mapæŒ‰ç…§Keyçš„é™åºæ’åˆ—: 12345678910111213141516void show(map&lt;string, int, greater&lt;string&gt;&gt;&amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout &lt;&lt; it -&gt; first &lt;&lt; \" \" &lt;&lt; it -&gt; second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;}// mapå¯ä»¥æŒ‡å®šæŒ‰ç…§keyçš„å¤§å°å‡åºæˆ–é™åºæ’åˆ—map&lt;string, int, greater&lt;string&gt;&gt; desc_map;desc_map[\"boss\"] = 2;desc_map[\"abuse\"] = 1;desc_map[\"unit\"] = 3;desc_map[\"duty\"] = 4;cout &lt;&lt; \"ğŸš€ DESC:\" &lt;&lt; endl;show(desc_map); æ‰“å°ç»“æœä¸º: 123456ğŸš€ DESC:unit 3duty 4boss 2abuse 1================================ Sort by value å¯¹mapçš„valueè¿›è¡Œæ’åºéœ€è¦å€ŸåŠ©åˆ«çš„å®¹å™¨ï¼Œæ¯”å¦‚vectorï¼Œå°†æ¯ä¸€ä¸ªmapä¸­çš„entryæ”¾åˆ°ä¸€ä¸ªæ–°çš„vectorä¸­ï¼Œç„¶åä½¿ç”¨sort()å‡½æ•°åŠ ä¸Šè‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™cmpå³å¯å¯¹mapä¸­çš„å…ƒç´ æŒ‰ç…§valueè¿›è¡Œæ’åº: demoä¸­ä½¿ç”¨çš„æ¯”è¾ƒå‡½æ•°å°†æŒ‰ç…§valueå‡åºæ’åºï¼š 1234567891011121314151617181920212223242526// å‡åºæ’åˆ—bool cmp(const pair&lt;string, int&gt;&amp; p1, const pair&lt;string, int&gt;&amp; p2) { return p1.second &lt; p2.second;}void sortByValue(map&lt;string, int&gt;&amp; map) { vector&lt;pair&lt;string, int&gt; &gt; data; for (auto it = map.begin(); it != map.end(); it++) { data.push_back(make_pair(it -&gt; first, it -&gt; second)); } sort(data.begin(), data.end(), cmp); for (pair&lt;string, int&gt; p : data) { cout &lt;&lt; p.first &lt;&lt; \" \" &lt;&lt; p.second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;}// å¯¹mapçš„valueè¿›è¡Œæ’åºmap&lt;string, int&gt; value_sort_map;value_sort_map[\"boss\"] = 2;value_sort_map[\"abuse\"] = 1;value_sort_map[\"unit\"] = 3;value_sort_map[\"duty\"] = 4;cout &lt;&lt; \"ğŸš€ SORT BY VALUE\" &lt;&lt; endl;sortByValue(value_sort_map); æ‰“å°ç»“æœå¦‚ä¸‹ï¼š 123456ğŸš€ SORT BY VALUEabuse 1boss 2unit 3duty 4================================ å®Œæ•´ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273#include &lt;iostream&gt;#include &lt;map&gt;#include &lt;utility&gt; // ä½¿ç”¨make_pair()#include &lt;string&gt;#include &lt;vector&gt;using namespace std;// å‡åºæ’åˆ—bool cmp(const pair&lt;string, int&gt;&amp; p1, const pair&lt;string, int&gt;&amp; p2) { return p1.second &lt; p2.second;}void sortByValue(map&lt;string, int&gt;&amp; map) { vector&lt;pair&lt;string, int&gt; &gt; data; for (auto it = map.begin(); it != map.end(); it++) { data.push_back(make_pair(it -&gt; first, it -&gt; second)); } sort(data.begin(), data.end(), cmp); for (pair&lt;string, int&gt; p : data) { cout &lt;&lt; p.first &lt;&lt; \" \" &lt;&lt; p.second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;}void show(map&lt;string, int&gt;&amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout &lt;&lt; it -&gt; first &lt;&lt; \" \" &lt;&lt; it -&gt; second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;}void show(map&lt;string, int, greater&lt;string&gt;&gt;&amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout &lt;&lt; it -&gt; first &lt;&lt; \" \" &lt;&lt; it -&gt; second &lt;&lt; endl; } cout &lt;&lt; \"================================\" &lt;&lt; endl; cout &lt;&lt; endl;}int main() { map&lt;string, int&gt; asc_map; asc_map[\"boss\"] = 2; asc_map[\"abuse\"] = 1; asc_map[\"unit\"] = 3; asc_map[\"duty\"] = 4; // mapé»˜è®¤æŒ‰ç…§keyçš„å¤§å°å‡åºæ’åˆ—, å³ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºless&lt;string&gt; cout &lt;&lt; \"ğŸš€ DEFAULT: \" &lt;&lt; endl; show(asc_map); // mapå¯ä»¥æŒ‡å®šæŒ‰ç…§keyçš„å¤§å°å‡åºæˆ–é™åºæ’åˆ— map&lt;string, int, greater&lt;string&gt;&gt; desc_map; desc_map[\"boss\"] = 2; desc_map[\"abuse\"] = 1; desc_map[\"unit\"] = 3; desc_map[\"duty\"] = 4; cout &lt;&lt; \"ğŸš€ DESC:\" &lt;&lt; endl; show(desc_map); // å¯¹mapçš„valueè¿›è¡Œæ’åº map&lt;string, int&gt; value_sort_map; value_sort_map[\"boss\"] = 2; value_sort_map[\"abuse\"] = 1; value_sort_map[\"unit\"] = 3; value_sort_map[\"duty\"] = 4; cout &lt;&lt; \"ğŸš€ SORT BY VALUE\" &lt;&lt; endl; sortByValue(value_sort_map); return 0;}","link":"/2020/03/05/STL-map/"},{"title":"Spring Boot Beanè‡ªåŠ¨è£…é…","text":"Spring Boot Beanè‡ªåŠ¨è£…é… 1. å…¨å±€é…ç½®æ–‡ä»¶ ä¿®æ”¹Spring Bootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼ŒSpring Bootåœ¨åº•å±‚è‡ªåŠ¨åŠ è½½ application.yml application.properties 2. Beanè‡ªåŠ¨è£…é…åŸç† (1) Spring Bootå¯åŠ¨æ—¶åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½@EnableAutoConfiguration (2) @EnableAutoConfiguration â€‹ ä½œç”¨ï¼š å°†ç±»è·¯å¾„ä¸‹META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼(è‡ªåŠ¨è£…é…ç±»)åŠ å…¥åˆ°æ‰§è¡Œè®¡åˆ’ä¸­ (3) æ¯ä¸€ä¸ªè‡ªåŠ¨è£…é…ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ 3. YAMLè§„åˆ™ (1) åŒå¼•å· â€‹ ä¸ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æˆ–ä½œä¸ºæœ¬èº«æƒ³è¦è¡¨è¾¾çš„æ„æ€ â€‹ name: &quot;zhangsan \\n lisi&quot; è¾“å‡º zhangsan æ¢è¡Œ lisi â€‹ å•å¼•å· â€‹ ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®ï¼Œå¦‚ï¼š â€‹ name: 'zhangsan \\n lisi' è¾“å‡º zhangsan \\n lisi (2) æ”¯æŒæ¾æ•£çš„ç»“æ„ â€‹ family-name = familyName = family_name (3) å ä½ç¬¦ 123456${random.value}${random.int}${random.long}${random.int(10)}${random.int[1024, 65536]}${xxxx.yyyy: é»˜è®¤å€¼} 4. è·å–è‡ªå®šä¹‰é…ç½® (1) @Value(&quot;${}&quot;) â€‹ å®ç°äº†å•ä¸ªå±æ€§çš„æ³¨å…¥ (2) å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨@ConfigurationPropertiesè·å–é…ç½®å€¼ 12345678910111213141516171819202122package com.haven.model.yaml;import lombok.Data;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;/** * @author HavenTong * @date 2019/10/29 5:44 ä¸‹åˆ */@Data@Component@ConfigurationProperties(prefix = \"family\")public class Family {// @Value(\"${family.family-name}\") private String familyName; private Father father; private Mother mother; private Child child;} (3) ä¸¤ç§æ³¨è§£åŒºåˆ« @ConfigurationProperties @Value åŠŸèƒ½ æ‰¹é‡æ³¨å…¥å±æ€§ ä¸€ä¸ªä¸ªæŒ‡å®š æ¾æ•£è¯­æ³•ç»‘å®š æ”¯æŒ ä¸æ”¯æŒ SpEL ä¸æ”¯æŒ æ”¯æŒ å¤æ‚æ•°æ®ç±»å‹åµŒå¥— æ”¯æŒ ä¸æ”¯æŒ JSR303æ•°æ®æ ¡éªŒ æ”¯æŒ ä¸æ”¯æŒ 5. é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ (1) åœ¨éœ€è¦æ ¡éªŒçš„å±æ€§è£…é…ç±»ä¸ŠåŠ @Validatedæ³¨è§£ (2) æ•°æ®æ ¡éªŒæ³¨è§£åˆ—è¡¨ (3) è‹¥éªŒè¯å¤±è´¥ï¼Œä¼šå‡ºç°BindValidationExceptionå¼‚å¸¸ 6. Profileä¸åŒç¯å¢ƒä¸‹ä¸åŒé…ç½® ä¼˜å…ˆçº§ï¼š å¤–éƒ¨å¤§äºå†…éƒ¨ï¼Œç‰¹æŒ‡å¤§äºæ³›æŒ‡ application.yml å…¨å±€é…ç½®æ–‡ä»¶ application-dev.yml å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ application-test.yml æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ Application-prod.yml ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ (1) é…ç½®application.yml è®¾ç½®spring.profiles.activeæŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ ä¼˜å…ˆçº§ä»¥ä¸‹é¢çš„dev/test/prod ymlä¸ºä¼˜å…ˆ 123spring: profiles: active: dev (2) é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ 1java -jar SpringBoot01HelloWorld-1.0-SNAPSHOT.jar --spring.profiles.active=dev (3) IDEAè®¾ç½®Program Arguments â€‹ (a) Edit Configuration --&gt; Environment --&gt; Program Argument 1--spring.profiles.active=dev â€‹ (b) Edit Configuration --&gt; Environment --&gt; VM options 1-Dspring.profiles.active=dev 7. é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½ä½ç½® spring bootä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.properties / application.ymlæ–‡ä»¶ä½œä¸ºspring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ 1234-file:./config/-file:./-classpath:/config/-classpath:./ ä»¥ä¸Šä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œæ‰€æœ‰ä½ç½®çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼›é«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§ 8. é…ç½®æ–‡ä»¶æ•æ„Ÿå­—æ®µåŠ å¯† (1) ä¸spring bootæ•´åˆ 123456&lt;!-- https://mvnrepository.com/artifact/com.github.ulisesbocchio/jasypt-spring-boot-starter --&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt; &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.18&lt;/version&gt; &lt;/dependency&gt; (2) éœ€è¦åŠ å¯†çš„åœ°æ–¹ï¼Œä½¿ç”¨ENC()è¿›è¡ŒåŒ…è£¹å¤„ç† (3) åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¯†é’¥","link":"/2019/10/29/Spring-Boot-Bean%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"},{"title":"Spring Boot-CORS","text":"Spring Boot-CORS ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ å®šä¹‰ï¼šæµè§ˆå™¨ä»ä¸€ä¸ªåŸŸåçš„ç½‘é¡µå–è¯·æ±‚å¦ä¸€ä¸ªåŸŸåä¸‹çš„ä¸œè¥¿ã€‚é€šä¿—ç‚¹è¯´ï¼Œæµè§ˆå™¨ç›´æ¥ä»AåŸŸè®¿é—®BåŸŸä¸­çš„èµ„æºæ˜¯ä¸è¢«å…è®¸çš„ï¼Œå¦‚æœæƒ³è¦è®¿é—®ï¼Œå°±éœ€è¦è¿›è¡Œä¸€æ­¥æ“ä½œï¼Œè¿™æ“ä½œå°±å«â€œè·¨åŸŸâ€ã€‚ä¾‹å¦‚ï¼Œä½ ä»ç™¾åº¦çš„é¡µé¢ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œè¯·æ±‚äº†æ–°æµªçš„ä¸€ä¸ªæ¥å£ï¼Œè¿™å°±è¿›è¡Œäº†è·¨åŸŸã€‚ä¸å•å•åªæœ‰åŸŸåä¸åŒå°±æ˜¯è·¨åŸŸï¼ŒåŸŸåã€ç«¯å£ã€åè®®å…¶ä¸€ä¸åŒå°±æ˜¯ä¸åŒçš„åŸŸï¼Œè¯·æ±‚èµ„æºéœ€è¦è·¨åŸŸã€‚ ä¸ºä»€ä¹ˆè¦è·¨åŸŸï¼Ÿ ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Œè€Œä¸ç›´æ¥è®¿é—®å…¶ä»–åŸŸä¸‹çš„èµ„æºå‘¢ï¼Ÿè¿™æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸“ä¸šç‚¹è¯´å«æµè§ˆå™¨åŒæºç­–ç•¥é™åˆ¶ã€‚ä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ã€‚ç°åœ¨çš„å®‰å…¨æ¡†æ¶ï¼Œä¸€èˆ¬è¯·æ±‚çš„æ—¶å€™headerä¸­ä¸æ˜¯éƒ½å­˜ä¸ªtokenå˜›ï¼Œä½ è¦æ˜¯ç”¨è¿™ä¸ªtokenå»æ­£å¸¸è®¿é—®AåŸŸä¸‹çš„ä¸œè¥¿æ˜¯æ²¡é—®é¢˜çš„ï¼Œç„¶ååˆå»è®¿é—®äº†BåŸŸï¼Œç»“æœé˜´å·®é˜³é”™çš„è¿˜å¸¦ç€è¿™ä¸ªtokenï¼Œé‚£ä¹ˆBåŸŸï¼Œæˆ–è€…è¯´Bç½‘ç«™æ˜¯ä¸æ˜¯å°±å¯ä»¥æ‹¿ç€ä½ çš„tokenå»AåŸŸä¸‹åšç‚¹ä»€ä¹ˆå‘¢ï¼Œè¿™å°±ç›¸å½“å±é™©äº†ã€‚æ‰€ä»¥æµè§ˆå™¨åŠ ä¸Šäº†æ‰€è°“çš„æµè§ˆå™¨åŒæºç­–ç•¥é™åˆ¶ã€‚ä½†æ˜¯ä¸ºäº†æˆ‘ä»¬çœŸçš„éœ€è¦ä»AåŸŸä¸‹è®¿é—®Bçš„èµ„æºï¼ˆæ­£å¸¸è®¿é—®ï¼‰ï¼Œå°±éœ€è¦ç”¨åˆ°è·¨åŸŸï¼Œè·¨è¶Šè¿™ä¸ªé™åˆ¶äº†ã€‚ SpringBootè§£å†³è·¨åŸŸé—®é¢˜ SpringBootå¯ä»¥åŸºäºCorsè§£å†³è·¨åŸŸé—®é¢˜ï¼ŒCorsæ˜¯ä¸€ç§æœºåˆ¶ï¼Œå‘Šè¯‰æˆ‘ä»¬çš„åå°ï¼Œå“ªè¾¹ï¼ˆorigin ï¼‰æ¥çš„è¯·æ±‚å¯ä»¥è®¿é—®æœåŠ¡å™¨çš„æ•°æ®ã€‚ å…¨å±€é…ç½® é…ç½®å®ä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516@Configurationpublic class CorsConfig { @Bean public WebMvcConfigurer corsConfigurer(){ return new WebMvcConfigurer(){ @Override public void addCorsMappings(CorsRegistry registry){ registry.addMapping(\"/**\") .allowedOrigins(\"*\") .allowedMethods(\"POST\", \"GET\", \"PUT\", \"OPTIONS\", \"DELETE\") .allowCredentials(true) .maxAge(3600); } }; }} é¦–å…ˆå®ç°äº†WebMvcConfigureræ¥å£ï¼ŒWebMvcConfigurerè¿™ä¸ªæ¥å£ååˆ†å¼ºå¤§ï¼Œé‡Œé¢è¿˜æœ‰å¾ˆå¤šå¯ç”¨çš„æ–¹æ³•ï¼Œåœ¨SpringBoot2.0é‡Œé¢å¯ä»¥è§£å†³WebMvcConfigurerAdapteræ›¾ç»çš„éƒ¨åˆ†ä»»åŠ¡ã€‚å…¶ä¸­ä¸€ä¸ªæ–¹æ³•å°±æ˜¯addCorsMappings()ï¼Œæ˜¯ä¸“é—¨ä¸ºå¼€å‘äººå‘˜è§£å†³è·¨åŸŸè€Œè¯ç”Ÿçš„æ¥å£ã€‚å…¶ä¸­æ„é€ å‚æ•°ä¸ºCorsRegistryã€‚ CorsRegistryçš„æºç  123456789101112131415161718public class CorsRegistry { private final List&lt;CorsRegistration&gt; registrations = new ArrayList&lt;&gt;(); public CorsRegistration addMapping(String pathPattern) { CorsRegistration registration = new CorsRegistration(pathPattern); this.registrations.add(registration); return registration; } protected Map&lt;String, CorsConfiguration&gt; getCorsConfigurations() { Map&lt;String, CorsConfiguration&gt; configs = new LinkedHashMap&lt;&gt;(this.registrations.size()); for (CorsRegistration registration : this.registrations) { configs.put(registration.getPathPattern(), registration.getCorsConfiguration()); } return configs; }} å¯ä»¥çœ‹å‡ºCorsRegistryæœ‰ä¸ªå±æ€§registrations ï¼ŒæŒ‰é“ç†å¯ä»¥æ ¹æ®ä¸åŒçš„é¡¹ç›®è·¯å¾„è¿›è¡Œå®šåˆ¶è®¿é—®è¡Œä¸ºï¼Œä½†æ˜¯æˆ‘ä»¬ç¤ºä¾‹ç›´æ¥å°†pathPattern è®¾ç½®ä¸º/**ï¼Œä¹Ÿå°±æ˜¯è¯´å·²è¦†ç›–é¡¹ç›®æ‰€æœ‰è·¯å¾„ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªCorsRegistrationå°±å¥½ã€‚getCorsConfigurations(),è¿™ä¸ªæ–¹æ³•æ˜¯è·å–æ‰€æœ‰CorsConfigurationçš„Mapé›†åˆï¼Œkeyå€¼ä¸ºä¼ å…¥è·¯å¾„pathPatternã€‚ å›åˆ°ç¤ºä¾‹ä»£ç CorsConfigä¸­ï¼Œregistryå¯¹è±¡addMapping()å¢åŠ å®Œä¼ å…¥è·¯å¾„pathPatternä¹‹åï¼Œreturnäº†ä¸€ä¸ªCorsRegistrationå¯¹è±¡ï¼Œæ˜¯è¿›è¡Œæ›´å¤šçš„é…ç½®ï¼Œçœ‹ä¸€ä¸‹CorsRegistrationçš„ä»£ç ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½é…äº›ä»€ä¹ˆï¼Ÿ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class CorsRegistration { //ä¼ å…¥çš„è·¯å¾„ private final String pathPattern; //é…ç½®ä¿¡æ¯å®ä½“ç±» private final CorsConfiguration config; //æ„é€ æ–¹æ³• public CorsRegistration(String pathPattern) { this.pathPattern = pathPattern; //åŸç”Ÿæ³¨é‡Šçœ‹åˆ°äº†ä¸€ä¸ª @CrossOrigin è¿™ä¸ªæ³¨è§£ï¼Œå¾…ä¼šçœ‹çœ‹æ˜¯ä»€ä¹ˆ // Same implicit default values as the @CrossOrigin annotation + allows simple methods this.config = new CorsConfiguration().applyPermitDefaultValues(); } //å…è®¸å“ªäº›æºç½‘ç«™è®¿é—®ï¼Œé»˜è®¤æ‰€æœ‰ public CorsRegistration allowedOrigins(String... origins) { this.config.setAllowedOrigins(Arrays.asList(origins)); return this; } //å…è®¸ä½•ç§æ–¹å¼è®¿é—®ï¼Œé»˜è®¤ç®€å•æ–¹å¼ï¼Œå³ï¼šGETï¼ŒHEADï¼ŒPOST public CorsRegistration allowedMethods(String... methods) { this.config.setAllowedMethods(Arrays.asList(methods)); return this; } //è®¾ç½®è®¿é—®headerï¼Œé»˜è®¤æ‰€æœ‰ public CorsRegistration allowedHeaders(String... headers) { this.config.setAllowedHeaders(Arrays.asList(headers)); return this; } //è®¾ç½®response headersï¼Œé»˜è®¤æ²¡æœ‰ï¼ˆä»€ä¹ˆéƒ½ä¸è®¾ç½®ï¼‰ public CorsRegistration exposedHeaders(String... headers) { this.config.setExposedHeaders(Arrays.asList(headers)); return this; } //æ˜¯å¦æµè§ˆå™¨åº”è¯¥å‘é€credentialsï¼Œä¾‹å¦‚cookies Access-Control-Allow-Credentials public CorsRegistration allowCredentials(boolean allowCredentials) { this.config.setAllowCredentials(allowCredentials); return this; } //è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤1800ç§’ public CorsRegistration maxAge(long maxAge) { this.config.setMaxAge(maxAge); return this; } protected String getPathPattern() { return this.pathPattern; } protected CorsConfiguration getCorsConfiguration() { return this.config; }} å±€éƒ¨é…ç½® åœ¨Controllerä¸ŠåŠ å…¥@CrossOriginæ³¨è§£ 12345678910111213141516171819202122232425262728293031323334353637383940@Target({ ElementType.METHOD, ElementType.TYPE })@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface CrossOrigin { /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated String[] DEFAULT_ORIGINS = { \"*\" }; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated String[] DEFAULT_ALLOWED_HEADERS = { \"*\" }; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated boolean DEFAULT_ALLOW_CREDENTIALS = false; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated long DEFAULT_MAX_AGE = 1800 /** * Alias for {@link #origins}. */ @AliasFor(\"origins\") String[] value() default {}; @AliasFor(\"value\") String[] origins() default {}; String[] allowedHeaders() default {}; String[] exposedHeaders() default {}; RequestMethod[] methods() default {}; String allowCredentials() default \"\"; long maxAge() default -1;} è¿™ä¸ªæ³¨è§£å¯ä»¥ä½œç”¨äºæ–¹æ³•æˆ–è€…ç±»ä¸Šï¼Œå®ç°å±€éƒ¨è·¨åŸŸï¼Œä½ ä¼šå‘ç°é™¤äº†è®¾ç½®è·¯å¾„ï¼ˆå› ä¸ºæ²¡å¿…è¦äº†ï¼Œéƒ½å®šä½åˆ°å±€éƒ¨äº†ï¼‰å…¶ä»–çš„å‚æ•°ä¸å…¨å±€ç±»ä¼¼ã€‚","link":"/2019/11/18/Spring-Boot-CORS/"},{"title":"Spring Boot-IDEAå¼€å‘æŠ€å·§","text":"SpringBoot with IDEA æ’ä»¶ lombok IDEAä¸­ä¸‹è½½å åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; å¸¸ç”¨æ³¨è§£ 12345@Builder@Data@AllArgsConstructor@NoArgsConstructor... GsonFormat å¯ä»¥å¿«é€Ÿçš„å°†JSONè½¬æ¢ä¸ºå®ä½“ç±» shortcut option + s çƒ­éƒ¨ç½² pomæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; pomæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ– 1234567891011&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; Preferences â€“ Compiler â€“ Build project automatically âœ… cmd + option + shift + / â€“ registry â€“ compiler.automake.allow.when.app.running â€“ âœ… é…ç½®å®Œæˆåï¼Œä¿®æ”¹é¡¹ç›®æ–‡ä»¶åä¼šè‡ªåŠ¨build","link":"/2019/10/26/Spring-Boot-IDEA%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/"},{"title":"Spring Bootå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©","text":"Spring Bootå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡© é—®é¢˜ åœ¨å¯¹Spring Booté¡¹ç›®è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œä¼šå¯¹ä¸šåŠ¡é€»è¾‘serviceå±‚è¿›è¡Œæµ‹è¯•ã€‚è€Œserviceå±‚çš„ä»£ç å¯èƒ½ä¼šä½¿ç”¨utilä¸­çš„å·¥å…·ç±»ï¼Œè€Œå·¥å…·æ–¹æ³•é€šå¸¸æ¥è¯´éƒ½æ˜¯staticç±»å‹çš„æ–¹æ³•ã€‚é—®é¢˜åœ¨äºï¼Œå½“å¯¹serviceå±‚çš„ä»£ç è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯¹é™æ€æ–¹æ³•æ‰“æ¡©ï¼Œè¿”å›æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚ç„¶è€Œï¼Œä¸»æµçš„æµ‹è¯•æ¡†æ¶Mockitoå¹¶ä¸æ”¯æŒå¯¹é™æ€æ–¹æ³•çš„æ‰“æ¡©ã€‚å¯¹äºæ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ±‚å…¶ä»–æ¡†æ¶çš„è§£å†³æ–¹æ¡ˆ è§£å†³ 1. é¦–å…ˆï¼Œé€šè¿‡mockitoå®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œå¯ä»¥å‘ç°ï¼š What are the limitations of Mockito Cannot mock final classes Cannot mock static methods Cannot mock final methods - their real behavior is executed without any exception. Mockito cannot warn you about mocking final methods so be vigilant. å¯ä»¥çœ‹åˆ°ï¼ŒMockitoå¹¶ä¸æ”¯æŒmocké™æ€æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä»¥ä¸‹çš„æè¿°ï¼š Can I mock static methods? No. Mockito prefers object orientation and dependency injection over static, procedural code that is hard to understand &amp; change. If you deal with scary legacy code you can use JMockit or Powermock to mock static methods. é€šè¿‡è¿™æ ·çš„æè¿°ï¼Œæˆ‘ä»¬å‘ç°å…¶ä»–æ¡†æ¶æä¾›äº†è§£å†³æ–¹æ¡ˆï¼š JMockit Powermock ä¹‹åï¼Œç”±äºç½‘ä¸Šçš„å›ç­”ä¸­ï¼ŒPowermockæ›´åŠ ä¸»æµï¼Œä¸”ä¸Mockitoçš„è¯­æ³•ç›¸è¿‘ï¼Œäºæ˜¯è€ƒè™‘é€šè¿‡Powermockæ¡†æ¶è§£å†³é—®é¢˜ã€‚ å†æ¬¡æŸ¥é˜…äº†Powermockåœ¨githubä¸Šçš„é¡¹ç›®ä¸»é¡µï¼šï¼Œå¾—åˆ°ä»¥ä¸‹çš„è¯´æ˜ï¼š urrently PowerMock supports JUnit and TestNG. There are three different JUnit test executors available, one for JUnit 4.4-4.12, one for JUnit 4.0-4.3. The test executor for JUnit 3 is not avaliable since PowerMock 2.0. å¯ä»¥çœ‹å‡ºï¼ŒPowermockå½“å‰æœ€æ–°ç‰ˆæœ¬ä»…æ”¯æŒåˆ°JUnit4.12ï¼Œè€Œæ— æ³•å¯¹JUnit5æä¾›æ”¯æŒã€‚ç„¶è€Œï¼Œspring-boot-starter-testä¸­ï¼Œæ•´åˆçš„å·²æ˜¯JUnit5. åœ¨ç½‘ä¸Šæ‰¾å¯»äº†ä¼—å¤šçš„å›ç­”ï¼Œæ‰€æœ‰çš„ä¾‹å­éƒ½æ˜¯é€šè¿‡JUnit4ç¼–å†™çš„æµ‹è¯•è„šæœ¬ã€‚ ä¸”é€šè¿‡Powermockæµ‹è¯•çš„è„šæœ¬ç»“æ„å¦‚ä¸‹ï¼š 12345@RunWith(PowerMockRunner.class)@PrepareForTest( { YourClassWithEgStaticMethod.class })public class YourTestCase {...} è¯¥ç»“æ„ä¸ºJUnit4çš„å†™æ³•ï¼Œå¹¶ä¸èƒ½åœ¨JUnit5ä¸­ä½¿ç”¨ã€‚æˆ‘ä¹Ÿå°è¯•å¼ºè¡Œåœ¨Spring Booté¡¹ç›®ä¸­å•ç‹¬æ·»åŠ JUnit4ä¾èµ–ï¼Œç„¶åå•ç‹¬é€šè¿‡JUnit4æ¥è¿è¡Œé€šè¿‡Powermockç¼–å†™çš„æµ‹è¯•è„šæœ¬ï¼Œå¤šæ¬¡å°è¯•ä¹‹åä¾ç„¶æ— æ³•è¿è¡Œã€‚äºæ˜¯è½¬å‘å¦ä¸€ä¸ªæ¡†æ¶â€“JMockitã€‚ 2. å°è¯•é€šè¿‡JMockitæ¥æµ‹è¯•é™æ€æ–¹æ³•ã€‚é¦–å…ˆæŸ¥çœ‹JMockitæ˜¯å¦æ”¯æŒJUnit5ï¼Œåœ¨å®˜ç½‘å¯»æ‰¾åˆ°äº†ç­”æ¡ˆï¼š To run tests that use any of the JMockit APIs, use your Java IDE, Maven/Gradle build script, etc. the way you normally would. In principle, any JDK of version 1.7 or newer, on Windows, Mac OS X, or Linux, can be used. JMockit supports (and requires) the use of JUnit (version 4 or 5) or TestNG æ—¢ç„¶JMockitæ”¯æŒJUnit5ï¼Œä¸”å¯ä»¥å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©ï¼Œè¿™å°±æ˜¯ä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘å°±å»å¯»æ‰¾å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©çš„å®ç°æ–¹æ¡ˆã€‚ åœ¨ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å‘ç°äº†è§£å†³æ–¹æ¡ˆï¼š é¦–å…ˆï¼Œéœ€è¦æ·»åŠ JMockitçš„ä¾èµ–ï¼Œé€šè¿‡mvnrepositoryæ·»åŠ æœ€æ–°ç‰ˆçš„JMockitä¾èµ–ï¼š 1234567&lt;!-- https://mvnrepository.com/artifact/org.jmockit/jmockit --&gt; &lt;dependency&gt; &lt;groupId&gt;org.jmockit&lt;/groupId&gt; &lt;artifactId&gt;jmockit&lt;/artifactId&gt; &lt;version&gt;1.48&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; æŸ¥çœ‹åšå®¢ä¸­ç»™å‡ºçš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627282930313233// éœ€è¦æµ‹è¯•çš„ç±»public class AppManager { public boolean managerResponse(String question) { return AppManager.isResponsePositive(question); } public static boolean isResponsePositive(String value) { if (value == null) { return false; } int length = value.length(); int randomNumber = randomNumber(); return length == randomNumber ? true : false; } private static int randomNumber() { return new Random().nextInt(7); }}// å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©@Testpublic void givenAppManager_whenStaticMethodCalled_thenValidateExpectedResponse() { new MockUp&lt;AppManager&gt;() { @Mock public boolean isResponsePositive(String value) { return false; } }; assertFalse(appManager.managerResponse(\"Some string...\"));} æŒ‰ç…§ç±»ä¼¼çš„å†™æ³•ï¼Œå®Œæˆäº†æˆ‘çš„æµ‹è¯•è„šæœ¬çš„ç¼–å†™ 123456789101112131415161718192021222324@Test@DisplayName(\"å‘é€é‚®ä»¶å†…å®¹æ­£ç¡®\")void shouldSendCorrectEmailWhenUserIsNew(){ // ä½¿ç”¨JMockitå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡© new MockUp&lt;CheckCodeUtil&gt;(){ @mockit.Mock public String generateCheckCode(){ return \"123456\"; } }; when(redisTemplate.opsForValue()).thenReturn(new ValueOperationsFake()); ArgumentCaptor&lt;String&gt; emailCaptor = ArgumentCaptor.forClass(String.class); ArgumentCaptor&lt;String&gt; subjectCaptor = ArgumentCaptor.forClass(String.class); ArgumentCaptor&lt;String&gt; contentCaptor = ArgumentCaptor.forClass(String.class); customerService.sendCheckCode(\"10175101152@stu.ecnu.edu.cn\"); verify(mailService, times(1)) .sendHtmlMail(emailCaptor.capture(), subjectCaptor.capture(), contentCaptor.capture()); assertAll( () -&gt; assertEquals(\"10175101152@stu.ecnu.edu.cn\", emailCaptor.getValue()), () -&gt; assertEquals(\"Registration from MeetHere\", subjectCaptor.getValue()), () -&gt; assertEquals(\"&lt;h1&gt;Welcome to MeetHere!&lt;/h1&gt;&lt;p&gt;Your check code is &lt;u&gt;\" + \"123456\" + \"&lt;/u&gt;&lt;/p&gt;\", contentCaptor.getValue()) );} ç¼–å†™å®Œæ¯•åï¼Œå°è¯•æ˜¯å¦å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯ä¾ç„¶æŠ¥é”™ï¼š 1java.lang.IllegalStateException: JMockit didn't get initialized; please check the -javaagent JVM initialization parameter was used é’ˆå¯¹æŠ¥é”™ä¿¡æ¯å»Googleè¿›è¡ŒæŸ¥æ‰¾ï¼Œå¤§å¤šæ•°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š 1@RunWith(JMockit.class) è¿™åŒæ ·æ˜¯JUnit4çš„å†™æ³•ã€‚å¹¶ä¸èƒ½è§£å†³æˆ‘æ‰€é‡åˆ°çš„é—®é¢˜ å†æ¬¡å›åˆ°JMockitçš„å®˜æ–¹æ–‡æ¡£ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ä¸­ç»™å‡ºçš„è¿è¡Œæ–¹æ³•ï¼Œå‘ç°äº†æ½œåœ¨çš„è§£å†³æ–¹æ¡ˆï¼š JMockit also requires the -javaagent JVM initialization parameter to be used; when using the Maven Surefire plugin for test execution, itâ€™s specified as follows: æ‰€ä»¥çœ‹æ¥æƒ³è¦è¿è¡ŒJMockitoç¼–å†™çš„æµ‹è¯•è„šæœ¬ï¼Œéœ€è¦æŒ‡å®š-javaagentçš„JVMå‚æ•°æ‰å¯ä»¥ã€‚ å®˜ç½‘ç»™å‡ºäº†æ–¹æ¡ˆï¼š 1234567891011&lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.22.2&lt;/version&gt; &lt;!-- or some other version --&gt; &lt;configuration&gt; &lt;argLine&gt; -javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar &lt;/argLine&gt; &lt;/configuration&gt; &lt;/plugin&gt;&lt;/plugins&gt; å°†è¿™æ®µxmlå¤åˆ¶åˆ°pomæ–‡ä»¶ä¸­ï¼Œå¹¶å°†${jmockit.version}æ›¿æ¢ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨çš„1.48 å†æ¬¡è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š BINGO!","link":"/2019/12/10/Spring-Boot%E5%AF%B9%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E6%89%93%E6%A1%A9/"},{"title":"SpringBoot HelloWorld","text":"SpringBoot HelloWorld ä¸€ä¸ªåŠŸèƒ½ï¼š æµè§ˆå™¨å‘é€ä¸€ä¸ªhelloè¯·æ±‚ï¼Œæµè§ˆå™¨æ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”helloå­—ç¬¦ä¸² 1. åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹(jar) 2. å¯¼å…¥SpringBootç›¸å…³ä¾èµ– mavené€‰æ‹©è‡ªåŠ¨å¯¼å…¥ 12345678910111213&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; (1) çˆ¶é¡¹ç›® 12345&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt;&lt;/parent&gt; å®ƒçš„çˆ¶é¡¹ç›®æ˜¯ 1234567&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt; &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt; &lt;/parent&gt;æ¥çœŸæ­£ç®¡ç†Spring Booté‡Œçš„æ‰€æœ‰ä¾èµ– SpringBootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼› å¯¼å…¥ä¾èµ–é»˜è®¤ä¸éœ€è¦å†™ç‰ˆæœ¬(æ²¡æœ‰åœ¨dependenciesä¸­è¿›è¡Œç®¡ç†çš„è‡ªç„¶éœ€è¦å£°æ˜ç‰ˆæœ¬å·) (2) å¯¼å…¥çš„ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt;&lt;/dependency&gt; Spring-boot-starter-web spring bootåœºæ™¯å¯åŠ¨å™¨: å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ SpringBootå°†æ‰€æœ‰åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªstarters(å¯åŠ¨å™¨)ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™äº›starterï¼Œç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨ 3. ç¼–å†™ä¸»ç¨‹åº 1@SpringBootApplication // æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootç±» @SpringBootApplicationï¼šSpringBootæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ã€‚SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„main æ–¹æ³•æ¥å¯åŠ¨SpringBootç±»ã€‚ 12345678910111213141516@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@SpringBootConfiguration@EnableAutoConfiguration@ComponentScan( excludeFilters = {@Filter( type = FilterType.CUSTOM, classes = {TypeExcludeFilter.class}), @Filter( type = FilterType.CUSTOM, classes = {AutoConfigurationExcludeFilter.class})})public @interface SpringBootApplication @SpringBootConfigurationï¼šSpringBootçš„é…ç½®ç±» æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Booté…ç½®ç±» @Configurationï¼šé…ç½®ç±»ä¸Šæ ‡æ³¨è¿™ä¸ªæ³¨è§£ é…ç½®ç±»==é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼›@Component @EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ ä»¥å‰æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpringBootè‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½® 123@AutoConfigurationPackage@Import({AutoConfigurationImportSelector.class})public @interface EnableAutoConfiguration @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ… @Import({Registrar.class}) Springçš„åº•å±‚æ³¨è§£ï¼Œ@Importç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±Registrar.class å°†ä¸»é…ç½®ç±»(@SpringBootApplicationæ ‡æ³¨çš„ç±»)çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶éƒ½æ‰«æåˆ°Springå®¹å™¨ä¸­ã€‚ @Import({AutoConfigurationImportSelector.class}) ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ï¼Œ AutoConfigurationImportSelector.classï¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨ å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼› è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼› ä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»(xxxAutoConfiguration)ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå°±å…å»äº†æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶çš„å·¥ä½œ Spring Bootåœ¨å¯åŠ¨æ—¶ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œ J2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨spring-boot-autoconfigurationä¸­ 4. ç¼–å†™ç›¸å…³çš„Controller, Service 1234567891011121314151617181920package com.haven.Controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;/** * @author HavenTong * @date 2019-09-09 00:56 */@Controllerpublic class HelloController { @ResponseBody @RequestMapping(\"/hello\") private String hello(){ return (\"Hello World\"); }} 5. è¿è¡Œä¸»ç¨‹åºæµ‹è¯• 6. ç®€åŒ–éƒ¨ç½² https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/getting-started-first-application.html#getting-started-first-application-executable-jar 11.5 å¯¼å…¥Spring Bootçš„mavenæ’ä»¶ 123456789&lt;!-- å¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ… --&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; ä¾§è¾¹æ â€”&gt;Mavenâ€”&gt;é¡¹ç›®â€”&gt;LifeCycleâ€”&gt;package 1java -jar è¿›è¡Œæ‰§è¡Œ 7. ä½¿ç”¨SpringBoot Initializeråˆ›å»ºçš„é¡¹ç›® resources static: ä¿å­˜çš„æ‰€æœ‰é™æ€èµ„æº js, css, å›¾ç‰‡ templates: ä¿å­˜æ‰€æœ‰çš„æ¨¡ç‰ˆé¡µé¢ã€‚(Spring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒjspçš„é¡µé¢); å¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“(freemarker, thymeleaf); **application.properties: **Spring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶","link":"/2019/09/13/SpringBoot-HelloWorld/"},{"title":"SpringBoot-Mybatis","text":"Spring Boot-Mybatis 1. ORMæ¡†æ¶é€‰å‹ å¯¹æ¯”é¡¹ SPRING DATA JPA MYBATIS å•è¡¨æ“ä½œæ–¹å¼ åªéœ€ç»§æ‰¿ï¼Œä»£ç é‡è¾ƒå°‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚è€Œä¸”æ”¯æŒæ–¹æ³•åç”¨å…³é”®å­—ç”ŸæˆSQL å¯ä»¥ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†ç›¸å¯¹JPAå•è¡¨å¼±å¾ˆå¤šã€‚JPAå•è¡¨æ“ä½œéå¸¸ç®€å• å¤šè¡¨å…³è”æŸ¥è¯¢ å‹å¥½ï¼ŒåŠ¨æ€SQLä½¿ç”¨ä¸å¤Ÿæ–¹ä¾¿ï¼Œè€Œä¸”SQLå’Œä»£ç è€¦åˆåˆ°ä¸€èµ· éå¸¸å‹å¥½ï¼Œå¯ä»¥æœ‰éå¸¸ç›´è§‚çš„åŠ¨æ€SQL è‡ªå®šä¹‰SQL SQLå†™åœ¨æ³¨è§£é‡Œé¢ï¼Œå†™åŠ¨æ€SQLæœ‰äº›è´¹åŠ² SQLå¯ä»¥å†™åœ¨XMLé‡Œï¼Œç‹¬ç«‹ç®¡ç†ï¼ŒåŠ¨æ€SQLè¯­æ³•ä¹Ÿå®¹æ˜“ä¹¦å†™ç†è§£ å­¦ä¹ æˆæœ¬ ç•¥é«˜ è¾ƒä½ï¼Œä¼šå†™SQLå°±å¯ä»¥ JPAæ˜¯è§„èŒƒï¼ŒHibernateæ˜¯å®ç° Spring Data JPA å¯¹å¼€å‘äººå‘˜æ›´åŠ å‹å¥½ï¼Œå•è¡¨æ“ä½œéå¸¸æ–¹ä¾¿ï¼Œå¤šè¡¨å…³è”ä¹Ÿä¸éº»çƒ¦ mybatiså„æ–¹é¢éƒ½å¾ˆä¼˜ç§€ï¼Œä½¿ç”¨èŒƒå›´æ›´å¹¿ å¤§å‹é¡¹ç›®å»ºè®®mybatis 2. æ•´åˆMyBatisæ“ä½œæ•°æ®åº“ pom.xml 12345678910&lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt; mybatis-config.xml 12345678910111213&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;&lt;!-- é…ç½®å…¨å±€å±æ€§--&gt; &lt;settings&gt; &lt;!-- ä½¿ç”¨Jdbcçš„getGeneratedKeysè·å–æ•°æ®åº“è‡ªå¢ä¸»é”®å€¼ --&gt; &lt;setting name=\"useGeneratedKeys\" value=\"true\"/&gt; &lt;!-- ä½¿ç”¨åˆ—è¡¨ç­¾æ›¿æ¢åˆ—åˆ«å --&gt; &lt;setting name=\"useColumnLabel\" value=\"true\"/&gt; &lt;!-- å¼€å¯é©¼å³°å‘½åè½¬æ¢: Table{create_time} -&gt; Entity{createTime} --&gt; &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt; &lt;/settings&gt;&lt;/configuration&gt; åŒæ ·çš„å†…å®¹ä¹Ÿå¯ä»¥å†™åœ¨Spring Booté…ç½®æ–‡ä»¶application.ymlä¸­ 1234567891011121314spring: datasource: username: root password: Thwf1858 url: jdbc:mysql://localhost:3306/mybatis driver-class-name: com.mysql.jdbc.Driverlogging: level: com.haven.mybatis.mapper: debugmybatis: configuration: map-underscore-to-camel-case: true use-generated-keys: true use-column-label: true æ³¨è§£ä¹¦å†™SQL 123456789101112131415161718192021222324252627282930313233343536373839package com.hehe.mapper;@Mapperpublic interface UserMapper { /** * æ–¹å¼1ï¼šä½¿ç”¨æ³¨è§£ç¼–å†™SQLã€‚ */ @Select(\"select * from t_user\") List&lt;User&gt; list(); /** * æ–¹å¼2ï¼šä½¿ç”¨æ³¨è§£æŒ‡å®šæŸä¸ªå·¥å…·ç±»çš„æ–¹æ³•æ¥åŠ¨æ€ç¼–å†™SQL. */ @SelectProvider(type = UserSqlProvider.class, method = \"listByUsername\") List&lt;User&gt; listByUsername(String username); /** * å»¶ä¼¸ï¼šä¸Šè¿°ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥é™„åŠ @Resultsæ³¨è§£æ¥æŒ‡å®šç»“æœé›†çš„æ˜ å°„å…³ç³». * * PSï¼šå¦‚æœç¬¦åˆä¸‹åˆ’çº¿è½¬é©¼å³°çš„åŒ¹é…é¡¹å¯ä»¥ç›´æ¥çœç•¥ä¸å†™ã€‚ */ @Results({ @Result(property = \"userId\", column = \"USER_ID\"), @Result(property = \"username\", column = \"USERNAME\"), @Result(property = \"password\", column = \"PASSWORD\"), @Result(property = \"mobileNum\", column = \"PHONE_NUM\") }) @Select(\"select * from t_user\") List&lt;User&gt; listSample(); /** * å»¶ä¼¸ï¼šæ— è®ºä»€ä¹ˆæ–¹å¼,å¦‚æœæ¶‰åŠå¤šä¸ªå‚æ•°,åˆ™å¿…é¡»åŠ ä¸Š@Paramæ³¨è§£,å¦åˆ™æ— æ³•ä½¿ç”¨ELè¡¨è¾¾å¼è·å–å‚æ•°ã€‚ */ @Select(\"select * from t_user where username like #{username} and password like #{password}\") User get(@Param(\"username\") String username, @Param(\"password\") String password); @SelectProvider(type = UserSqlProvider.class, method = \"getBadUser\") User getBadUser(@Param(\"username\") String username, @Param(\"password\") String password);} å¯ä»¥ä¼ å…¥å‚æ•° JavaBean Map å¤šä¸ªå‚æ•°ï¼Œéœ€è¦ç”¨@Paramæ³¨è§£ @Resultsæ³¨è§£ 123456789@Select(\"select t_id, t_age, t_name \" + \"from sys_user \" + \"where t_id = #{id} \") @Results(id=\"userResults\", value={ @Result(property=\"id\", column=\"t_id\"), @Result(property=\"age\", column=\"t_age\"), @Result(property=\"name\", column=\"t_name\"), }) User selectUserById(@Param(\"id\") String id); @Resultså¯ä»¥ç»™å‡ºä¸€ä¸ªidï¼Œå…¶ä»–æ–¹æ³•æ ¹æ®è¯¥idå¯ä»¥é€šè¿‡@ResultMapé‡å¤ä½¿ç”¨ï¼š 12345@Select(\"select t_id, t_age, t_name \" + \"from sys_user \" + \"where t_name = #{name} \") @ResultMap(\"userResults\") User selectUserByName(@Param(\"name\") String name);","link":"/2019/11/07/SpringBoot-Mybatis/"},{"title":"SpringBoot RESTfulæ¥å£","text":"SpringBoot RESTfulæ¥å£ 1.å¸¸ç”¨æ³¨è§£å¼€å‘RESTfulæ¥å£ @RestController å°†æ³¨è§£çš„ç±»æ³¨å…¥åˆ°Springçš„ç¯å¢ƒ ç›¸å½“äº@Controller + @ResponseBody JSONæ ¼å¼çš„æ•°æ®å“åº” @RequestMapping ç±»ä¸Šçš„æ³¨è§£è¡¨ç¤ºæ³¨è§£çš„Controllerç±»çš„è·¯å¾„ @PathVariable è·¯å¾„ä¸Šçš„å˜é‡ @PathVariable &amp; RequestParam @PathVariableç”¨äºæ¥æ”¶URLä¸Šçš„{å‚æ•°} @RequestParamç”¨äºæ¥æ”¶æ™®é€šæ–¹å¼æä¾›çš„å‚æ•° @RequestBody &amp; @RequestParam JSONæ•°æ®å»ºè®®ç”¨@RequestBody,ä¼šåˆ†é…å®ä½“ç±»ä¸­çš„æ‰€æœ‰å±æ€§ @RequestParamé€‚åˆæ¥æ”¶å•ä¸ªçš„å‚æ•° @RequestBodyå¯ä»¥æ¥æ”¶åµŒå¥—çš„æ•°æ®ç»“æ„ 2.JSONæ•°æ®å¤„ç†å’ŒPostmanæµ‹è¯• Spring Booté»˜è®¤ä½¿ç”¨Jackson (1) å¸¸ç”¨æ³¨è§£ @JsonIgnoreï¼šåŠ åœ¨å±æ€§ä¸Šè¡¨ç¤ºåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å°†å®ƒå¿½ç•¥ @JsonPropertyï¼šä¸ºå±æ€§èµ·åˆ«å @JsonPropertyOrderï¼šåŠ åœ¨ç±»ä¸Š @JsonInclude(JsonInclude.Include.NON_NULL): å½“å±æ€§ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œè¿›è¡Œåºåˆ—åŒ–ï¼›å¦åˆ™ä¸è¿›è¡Œ @JsonFormat(pattern = &quot;&quot;, timezone = &quot;&quot;)ï¼šé…ç½®æ—¶é—´æ ¼å¼ 1234spring: jackson: date-format: yyyy-MM-dd HH:mm:ss time-zone: GMT+8 (2) åºåˆ—åŒ–ä¸ååºåˆ—åŒ– æŠŠå¯¹è±¡è½¬æˆå¯ä¼ è¾“ã€å¯å­˜å‚¨çš„æ ¼å¼(json, xml, äºŒè¿›åˆ¶ï¼Œç”šè‡³è‡ªå®šä¹‰çš„æ ¼å¼)å«åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–ä¸ºé€†è¿‡ç¨‹ 3. Postmanä½¿ç”¨ 4. ä½¿ç”¨Swagger 2å‘å¸ƒAPIæ–‡æ¡£ ä»£ç å˜ï¼Œæ–‡æ¡£å˜ï¼Œåªéœ€è¦å°‘é‡çš„æ³¨è§£ï¼Œä½¿ç”¨Swaggerå°±å¯ä»¥æ ¹æ®ä»£ç è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œå¾ˆå¥½åœ°ä¿æŒäº†æ–‡æ¡£çš„åŠæ—¶æ€§ è·¨è¯­è¨€æ€§ï¼Œæ”¯æŒ40å¤šç§è¯­è¨€ Swagge UIå‘ˆç°å‡ºä¸€ä»½å¯äº¤äº’å¼çš„APIæ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é¡µé¢å°è¯•APIçš„è°ƒç”¨ï¼Œçœå»äº†å‡†å¤‡å¤æ‚çš„ è°ƒç”¨å‚æ•°çš„è¿‡ç¨‹ è¿˜å¯ä»¥å°†æ–‡æ¡£è§„èŒƒå¯¼å…¥ç›¸å…³çš„å·¥å…·(e.x. SoapUI)ï¼Œè¿™äº›å·¥å…·ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºè‡ªåŠ¨åŒ–çš„æµ‹è¯• æ•´åˆSwagger 2 pom.xml 1234567891011&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.6.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.6.1&lt;/version&gt; &lt;/dependency&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142// config/Swagger2.javapackage com.haven.config;import org.springframework.beans.factory.annotation.Configurable;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.w3c.dom.DocumentType;import springfox.documentation.builders.ApiInfoBuilder;import springfox.documentation.builders.PathSelectors;import springfox.documentation.builders.RequestHandlerSelectors;import springfox.documentation.service.ApiInfo;import springfox.documentation.spi.DocumentationType;import springfox.documentation.spring.web.plugins.Docket;import springfox.documentation.swagger2.annotations.EnableSwagger2;/** * @author HavenTong * @date 2019/10/29 3:26 ä¸‹åˆ */@Configuration@EnableSwagger2public class Swagger2 { @Bean public Docket createRestApi(){ return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()) .select() .apis(RequestHandlerSelectors.basePackage(\"com.haven\")) .paths(PathSelectors.regex(\"/rest/.*\")) .build(); } private ApiInfo apiInfo(){ return new ApiInfoBuilder() .title(\"springbootåˆ©ç”¨swaggeræ„å»ºapiæ–‡æ¡£\") .description(\"ç®€å•ä¼˜é›…çš„restfuné£æ ¼\") .termsOfServiceUrl(\"http://www.zimug.com\") .version(\"1.0\") .build(); }} ä¹‹åå¯åŠ¨é¡¹ç›®ï¼Œé€šè¿‡http://localhost:8080/swagger-ui.htmlå³å¯è®¿é—®swagger-ui å¯ä»¥åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ›´è¯¦ç»†çš„æ³¨è§£ï¼š 12345678910111213 @ApiOperation(value = \"æ·»åŠ æ–‡ç« \", notes = \"æ·»åŠ æ–°çš„æ–‡ç« \", tags = \"Article\", httpMethod = \"POST\")// @ApiImplicitParams({// @ApiImplicitParam(name = \"title\", value = \"æ–‡ç« æ ‡é¢˜\", required = true, dataType = \"String\"),// @ApiImplicitParam(name = \"content\", value = \"æ–‡ç« å†…å®¹\", required = true, dataType = \"String\"),// @ApiImplicitParam(name = \"author\", value = \"æ–‡ç« ä½œè€…\", required = true, dataType = \"String\")// }) @ApiResponses({ @ApiResponse(code = 200, message = \"æˆåŠŸ\", response = AjaxResponse.class), @ApiResponse(code = 400, message = \"ç”¨æˆ·è¾“å…¥é”™è¯¯\", response = AjaxResponse.class), @ApiResponse(code = 500, message = \"ç³»ç»Ÿå†…éƒ¨é”™è¯¯\", response = AjaxResponse.class) }) @RequestMapping(value = \"/article\", method = RequestMethod.POST, produces = \"application/json\") public AjaxResponse saveArticle(@RequestBody Article article){ ç”±äºé‡‡ç”¨@RequestBodyå»æ¥æ”¶å‚æ•°ï¼Œè¿™é‡Œå°±ä¸éœ€è¦ä½¿ç”¨@ApiImplicitParamæ³¨è§£ï¼Œ@ApiImplicitParamæ³¨è§£ä¸@RequestParamæ³¨è§£æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ å»ºè®®æœ‰Swagger 2çš„æƒ…å†µä¸‹ï¼Œå‡å°‘ä¸æ­¤å¯¹åº”çš„ä»£ç æ³¨é‡Šæˆ–ä¸å†™ Swagger 2å¸¸ç”¨æ³¨è§£ @Apiï¼šç”¨åœ¨è¯·æ±‚çš„ç±»ä¸Šï¼Œè¡¨ç¤ºå¯¹ç±»çš„è¯´æ˜ â€‹ tags=â€œè¯´æ˜è¯¥ç±»çš„ä½œç”¨ï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šçœ‹åˆ°çš„æ³¨è§£â€ â€‹ value=â€œè¯¥å‚æ•°æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œåœ¨UIç•Œé¢ä¸Šä¹Ÿèƒ½çœ‹åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®â€ @ApiOperation: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨ â€‹ value=â€œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ï¼Œä½œç”¨â€ â€‹ notes=â€œæ–¹æ³•çš„å¤‡æ³¨è¯´æ˜â€ @ApiImplicitParams: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜ â€‹ @ApiImplicitParam: ç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢ â€‹ name=â€œå‚æ•°åâ€ â€‹ value=â€œå‚æ•°çš„æ±‰å­—è¯´æ˜ï¼Œè§£é‡Šâ€ â€‹ required=â€œå‚æ•°æ˜¯å¦å¿…é¡»è¦ä¼ â€ â€‹ paramType=â€œå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹â€ â€‹ - header --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeader â€‹ - query --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParam â€‹ - path(ç”¨äºrestfulæ¥å£) --&gt; è¯·æ±‚å‚æ•°çš„è·å–: @PathVariable â€‹ - body,formä¸å¸¸ç”¨ â€‹ dataType= â€œå‚æ•°ç±»å‹â€ï¼Œé»˜è®¤String, å…¶ä»–å€¼dataType=&quot;Integer&quot; â€‹ defaultValue= â€œå‚æ•°çš„é»˜è®¤å€¼â€ @ApiResponses: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å“åº” â€‹ @ApiResponse: ç”¨åœ¨@ApiResponsesä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯ â€‹ code= æ•°å­—ï¼Œe.x. 400 â€‹ message= ä¿¡æ¯ï¼Œä¾‹å¦‚&quot;è¯·æ±‚å‚æ•°æ²¡å¡«å¥½&quot; â€‹ response= æŠ›å‡ºå¼‚å¸¸çš„ç±» @ApiModel: ç”¨äºå“åº”ç±»ä¸Šï¼Œè¡¨ç¤ºä¸€ä¸ªè¿”å›å“åº”æ•°æ®çš„ä¿¡æ¯ã€‚(è¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™, ä½¿ç”¨@RequestBodyçš„åœºæ™¯ï¼Œè¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨@ApiImplicitParamæ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™) â€‹ @ApiModelProperty: ç”¨åœ¨å±æ€§ä¸Šï¼Œæè¿°å“åº”ç±»çš„å±æ€§ â€‹ â€‹","link":"/2019/10/29/SpringBoot-RESTful%E6%8E%A5%E5%8F%A3/"},{"title":"Topological-Sort","text":"æ‹“æ‰‘æ’åº è¿‘æ—¥å®ç°äº†ä¸€ä¸‹æ‹“æ‰‘æ’åºï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹æ‹“æ‰‘æ’åºçš„æ€æƒ³ï¼Œå¹¶é™„ä¸Šä¸€ä¸ªå…·ä½“çš„é¢˜ç›® è¿™é‡Œä½¿ç”¨bfså®ç° æ€æƒ³ å¯¹ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(DAG-Directed Acyclic Graph)Gè¿›è¡Œæ‹“æ‰‘æ’åºï¼Œå°†Gä¸­çš„æ‰€æœ‰é¡¶ç‚¹æ‹æˆä¸€ä¸ªçº¿æ€§åºåˆ—ï¼Œä½¿å¾—å›¾ä¸­ä»»ä½•ä¸€å¯¹é¡¶ç‚¹uå’Œvï¼Œè‹¥(u, v) å±äº E(G)ï¼Œåˆ™uåœ¨çº¿æ€§åºåˆ—ä¸­å‡ºç°åœ¨vä¹‹å‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±æŸé›†åˆä¸Šçš„ååºå¾—åˆ°è¿™ä¸ªé›†åˆçš„å…¨åº æ­¥éª¤ è®¡ç®—æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦(in-degree) å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åŠ å…¥ä¸€ä¸ªé˜Ÿåˆ— ç„¶åå‡ºé˜Ÿï¼Œå¾—åˆ°ä¸€ä¸ªå…ƒç´  å°†è¯¥å…ƒç´ æŒ‡å‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦éƒ½å‡1 åœ¨å‡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå…¶å‡åä¸º0åˆ™å°†è¯¥å…ƒç´ ä¹ŸåŠ å…¥é˜Ÿåˆ— ç»§ç»­è¿›è¡Œæ­¥éª¤3ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º è¿ç”¨ é™¤äº†ä»¥ä¸Šæåˆ°çš„ç”¨é€”ï¼Œè¿˜å¯ä»¥åˆ¤æ–­æœ‰å‘å›¾ä¸­æ˜¯å¦æœ‰ç¯ï¼š æ ¹æ®å‡ºé˜Ÿå…ƒç´ çš„ä¸ªæ•°ï¼Œè‹¥å‡ºé˜Ÿå…ƒç´ çš„ä¸ªæ•°ç­‰äºå›¾ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œåˆ™è¯¥å›¾æ— ç¯ï¼›å¦åˆ™è¯¥æœ‰å‘å›¾å­˜åœ¨ç¯ ä¾‹é¢˜ hdu-1285 é¢˜ç›®å¤§æ„å°±æ˜¯è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œæ¥è·å¾—æ¯”èµ›çš„åæ¬¡ï¼Œä½†æ˜¯åæ¬¡çš„æ’åˆ—è¦æŒ‰ç…§æœ€å°çš„å­—å…¸åºâ€“å³åŒç­‰æ’åçš„å…ƒç´ ï¼Œç¼–å·å°çš„æ”¾åœ¨å‰é¢ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸¤ç§æ–¹å¼ ä½¿ç”¨priority_queueä»£æ›¿queue ä¿è¯æ¯æ¬¡å‡ºé˜Ÿçš„å…ƒç´ éƒ½æ˜¯æœ€å°çš„é‚£ä¸ªï¼Œå…·ä½“ACä»£ç å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;algorithm&gt;#include &lt;queue&gt;using namespace std;int n, m;vector&lt;int&gt; topSort(vector&lt;vector&lt;int&gt; &gt;&amp; G){ vector&lt;int&gt; result; // è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦ vector&lt;int&gt; in(n + 1, 0); for (int i = 1; i &lt; G.size(); i++) { for (int j = 0; j &lt; G[i].size(); j++) { in[G[i][j]]++; } } // ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¿è¯æ¯æ¬¡å‡ºé˜Ÿçš„å…ƒç´ æœ€å° priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int &gt; &gt; queue; // ç¬¬ä¸€æ¬¡å…¥é˜Ÿï¼Œæ‰€æœ‰in-degreeä¸º0çš„èŠ‚ç‚¹ for (int i = 1; i &lt; in.size();i ++) { if (in[i] == 0) { queue.push(i); } } while (!queue.empty()) { int current = queue.top(); queue.pop(); // å‡ºé˜Ÿå…ƒç´ å­˜åˆ°æ’åºç»“æœä¸­ result.push_back(current); // å°†æ‰€æœ‰currentæŒ‡å‘çš„èŠ‚ç‚¹çš„in-degreeå…¨éƒ¨-1 for (int i = 0; i &lt; G[current].size(); i++) { in[G[current][i]]--; // å¦‚æœå‡åˆ°0åˆ™å…¥é˜Ÿ if (in[G[current][i]] == 0) { queue.push(G[current][i]); } } } return result;}int main() { while (cin &gt;&gt; n &gt;&gt; m) { vector&lt;vector&lt;int&gt; &gt; G(n + 1); int a, b; for (int i = 0; i &lt; m; i++) { cin &gt;&gt; a &gt;&gt; b; G[a].push_back(b); } vector&lt;int&gt; result = topSort(G); for (int i = 0; i &lt; result.size(); i++) { cout &lt;&lt; result[i] &lt;&lt; ((i == result.size() - 1) ? \"\" : \" \"); } cout &lt;&lt; endl; }} å¯¹äºin-degreeï¼Œæ¯æ¬¡ä»å¤´å¼€å§‹å¯»æ‰¾in-degreeä¸º0çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰¾åˆ°çš„éƒ½æ˜¯å½“å‰ç¼–å·æœ€å°çš„èŠ‚ç‚¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;cstring&gt;using namespace std;int n, m;// å­˜æ”¾ç»“æœint ans[505];void topSort(vector&lt;vector&lt;int&gt;&gt;&amp; G) { vector&lt;int&gt; in(n + 1); for (int i = 0; i &lt; G.size(); i++) { for (int j = 0; j &lt; G[i].size(); j++) { in[G[i][j]]++; } } for (int i = 1; i &lt;= n; i++) { // æ¯æ¬¡ä»inæ•°ç»„çš„å¤´éƒ¨å¼€å§‹æŸ¥æ‰¾ï¼Œé‚£ä¹ˆæ¯æ¬¡æ‰¾åˆ°çš„éƒ½æ˜¯å½“å‰ç¼–å·æœ€å°çš„èŠ‚ç‚¹ int k = 1; while (in[k] != 0){ k++; } ans[i] = k; // å°†in[k]èµ‹å€¼ä¸º-1æ¥è¡¨ç¤ºåˆ é™¤èŠ‚ç‚¹ in[k] = -1; // å°†kè¿æ¥çš„æ‰€æœ‰èŠ‚ç‚¹çš„in-degreeéƒ½-1 for (int j = 0; j &lt; G[k].size(); j++) { in[G[k][j]]--; } }}int main() { while (cin &gt;&gt; n &gt;&gt; m) { memset(ans, 0, sizeof(ans)); int a, b; vector&lt;vector&lt;int&gt; &gt; G(n + 1); for (int i = 0; i &lt; m; i++) { cin &gt;&gt; a &gt;&gt; b; G[a].push_back(b); } topSort(G); for (int i = 1; i &lt;= n; i++) { cout &lt;&lt; ans[i] &lt;&lt; ((i == n ) ? \"\" : \" \"); } cout &lt;&lt; endl; } return 0;}","link":"/2020/03/06/Topological-Sort/"},{"title":"Vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ","text":"ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ ä»Vueå®ä¾‹åˆ›å»ºã€è¿è¡Œã€åˆ°é”€æ¯æœŸé—´ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ç»Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸã€‚ ç”Ÿå‘½å‘¨æœŸé’©å­ ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„åˆ«å ç”Ÿå‘½å‘¨æœŸé’©å­ = ç”Ÿå‘½å‘¨æœŸå‡½æ•° = ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†ç±» åˆ›å»ºæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° beforeCreate å®ä¾‹åˆšåœ¨å†…å­˜ä¸­è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰åˆå§‹åŒ–å¥½dataå’Œmethodså±æ€§ã€‚åªæœ‰é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œé»˜è®¤çš„äº‹ä»¶ created å®ä¾‹åœ¨å†…å­˜ä¸­å·²åˆ›å»ºokï¼Œdataå’Œmethodå·²åˆ›å»ºokã€‚æ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹ç¼–è¯‘æ¨¡ç‰ˆ beforeMount æ­¤æ—¶å·²ç»å®Œæˆäº†æ¨¡ç‰ˆçš„ç¼–è¯‘ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸­ mounted æ­¤æ—¶å·²ç»å°†ç¼–è¯‘å¥½çš„æ¨¡ç‰ˆæŒ‚è½½åˆ°äº†é¡µé¢æŒ‡å®šçš„å®¹å™¨ä¸­ä½¿ç”¨ è¿è¡ŒæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° beforeUpdate çŠ¶æ€æ›´æ–°ä¹‹å‰æ‰§è¡Œæ­¤å‡½æ•°ï¼Œæ­¤æ—¶dataçš„çŠ¶æ€æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰é‡æ–°æ¸²æŸ“DOMèŠ‚ç‚¹ updated å®ä¾‹æ›´æ–°å®Œæ¯•åè°ƒç”¨æ­¤å‡½æ•°ï¼Œæ­¤æ—¶dataçš„çŠ¶æ€å€¼å’Œç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®éƒ½å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œç•Œé¢å·²ç»è¢«é‡æ–°æ¸²æŸ“å®Œæ¯• é”€æ¯æœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° beforeDestroy å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ï¼Œåœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä¾ç„¶å®Œå…¨å¯ç”¨ destroyed Vueå®ä¾‹é”€æ¯åè°ƒç”¨ï¼Œè°ƒç”¨åï¼ŒVueå®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯","link":"/2019/07/20/Vue%E5%AE%9E%E4%BE%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"},{"title":"[Hexo] Theme BeanTech","text":"Ported Theme of Hux Blog, Thank Huxpro for designing such a flawless theme. This BeanTech theme created by YuHsuan modified from the original Porter Kaijun Usage I publish the whole project for your convenience, so you can just follow the instruction down below, then you can easily customiz your own blog! Letâ€™s begin!!! Init 123git clone https://github.com/YenYuHsuan/hexo-theme-beantech.git ./hexo-beantechcd hexo-beantechnpm install Modify Modify _config.yml file with your own info. Especially the section: Deployment Replace to your own repo! 1234deploy: type: git repo: https://github.com/&lt;yourAccount&gt;/&lt;repo&gt; branch: &lt;your-branch&gt; Sidebar settings Copy your avatar image to &lt;root&gt;/img/ and modify the _config.yml: 123sidebar: true # whether or not using Sidebar.sidebar-about-description: \"&lt;your description&gt;\"sidebar-avatar: img/&lt;your avatar path&gt; and activate your personal widget you like 1234567widgets: # here are widget you can use, you can comment out- featured-tags- short-about- recent-posts- friends-blog- archive- category if you want to add sidebar widget, please add at layout/_widget. Signature Setup Copy your signature image to &lt;root&gt;/img/signature and modify the _config.yml: 12signature: true # show signaturesignature-img: img/signature/&lt;your-signature-ID&gt; Go to top icon Setup My icon is using iron man, you can change to your own icon at css/image. Post tag You can decide to show post tags or not. 1home_posts_tag: true 1home_posts_tag: false Markdown render My markdown render engine plugin is hexo-renderer-markdown-it. 12345678910# Markdown-it config## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wikimarkdown: render: html: true xhtmlOut: false breaks: true linkify: true typographer: true quotes: 'â€œâ€â€˜â€™' and if you want to change the header anchor â€˜â„¬â€™, you can go to layout/post.ejs to change it. 123456async(\"https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js\",function(){ anchors.options = { visible: 'hover', placement: 'left', icon: â„¬ // this is the header anchor \"unicode\" icon }; Hexo Basics Some hexo command: 1234hexo new post \"&lt;post name&gt;\" # you can change post to another layout if you wanthexo clean &amp;&amp; hexo generate # generate the static filehexo server # run hexo in local environmenthexo deploy # hexo will push the static files automatically into the specific branch(gh-pages) of your repo! Have fun ^_^ Please Star this Project if you like it! Follow would also be appreciated! Peace!","link":"/2017/03/18/hexo-theme-beantech/"},{"title":"redis.conf","text":"redis.conf ç»‘å®šçš„ä¸»æœºåœ°å€ 1bind 127.0.0.1 å¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼Œåˆ™éœ€è¦æ³¨é‡Šæ‰ å®ˆæŠ¤è¿›ç¨‹ 1daemonize no Redisé»˜è®¤ä»¥éå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå¦‚æœæƒ³è¦æ”¹ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œåˆ™è®¾ç½®ä¸ºyes pidfile 1pidfile /var/run/redis_6379.pid è®¾ç½®å½“Redisä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå®ƒçš„pidå†™å…¥çš„æ–‡ä»¶ ç«¯å£ 1port 6379 æŒ‡å®šRedisçš„ç«¯å£ æ—¥å¿—è®°å½•çº§åˆ« 1loglevel verbose Redisæ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebug, verbose, notice, warning, é»˜è®¤ä¸ºverbose è®¾ç½®æ•°æ®åº“ä¸ªæ•° 1databases 16 æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ 1save &lt;seconds&gt; &lt;changes&gt; é»˜è®¤é…ç½®æ–‡ä»¶æä¾›ä¸‰ç§æ“ä½œ 123save 900 1save 300 10save 60 10000 æ»¡è¶³ä¸€ä¸ªå°±æŒä¹…åŒ– æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤ä¸ºdump.rdb 1dbfilename dump.rdb æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½• 1dir ./ é»˜è®¤å½“å‰ç›®å½• ä¸»ä»æœåŠ¡ 1slaveof &lt;masterip&gt; &lt;masterport&gt; è®¾ç½®å½“æœ¬æœºä¸ºslaveæœåŠ¡æ—¶ï¼Œè®¾ç½®masteræœåŠ¡çš„IPåœ°å€åŠç«¯å£ï¼Œåœ¨Rediså¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä»masterè¿›è¡Œæ•°æ®åŒæ­¥ masteræœåŠ¡å¯†ç ä¿æŠ¤ 1masterauth &lt;master-password&gt; å½“masteræœåŠ¡è®¾ç½®äº†å¯†ç ä¿æŠ¤æ—¶ï¼ŒslaveæœåŠ¡è¿æ¥masteræœåŠ¡çš„å¯†ç  è®¾ç½®redisè¿æ¥å¯†ç  1requirepass foobared å¦‚æœé…ç½®äº†è¿æ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥Redisæ—¶éœ€è¦é€šè¿‡ AUTH &lt;password&gt;å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­ Javaè¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç  è®¾ç½®æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ 1maxclients 10000 æŒ‡å®šredisæœ€å¤§å†…å­˜é™åˆ¶ 1maxmemory &lt;bytes&gt; å»ºè®®æ ¹æ®æœåŠ¡å™¨å®é™…æƒ…å†µè®¾ç½® å»ºè®®ä¸è¦è¶…è¿‡1G å¯¹äºredisä¸­çš„å†…å­˜ç®¡ç†æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š ä¸ºæ•°æ®è®¾ç½®è¶…æ—¶äº‹ä»¶ é‡‡ç”¨LRUç®—æ³•å°†ä¸ç”¨çš„æ•°æ®åˆ é™¤ volatile-lru: è®¾å®šè¶…æ—¶æ—¶é—´çš„æ•°æ®ä¸­ï¼Œåˆ é™¤æœ€ä¸å¸¸ä½¿ç”¨çš„å…ƒç´  allkeys-lru: æŸ¥è¯¢æ‰€æœ‰keyä¸­æœ€è¿‘æœ€ä¸å¸¸ä½¿ç”¨çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œåº”ç”¨æœ€å¹¿æ³› volatile-random: åœ¨å·²ç»è®¾å®šäº†è¶…æ—¶çš„æ•°æ®ä¸­éšæœºåˆ é™¤ allkeys-random: æŸ¥è¯¢æ‰€æœ‰çš„keyä¹‹åéšæœºåˆ é™¤ volatile-ttl: æŸ¥è¯¢å…¨éƒ¨è®¾å®šè¶…æ—¶æ—¶é—´çš„æ•°æ®ï¼Œä¹‹åæ’åºï¼Œå°†é©¬ä¸Šå¿«è¦è¿‡æœŸçš„æ•°æ®è¿›è¡Œåˆ é™¤æ“ä½œ noevication: ä¸è¿›è¡Œåˆ é™¤æ“ä½œï¼Œå†…å­˜æº¢å‡ºå°±æŠ¥é”™è¿”å› é…ç½®redisæœåŠ¡ç«¯ å…è®¸è¿œç¨‹è®¿é—® æ³¨é‡Šæ‰ bind 127.0.0.1 ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ å°†daemonize no æ”¹ä¸º daemonize yes Java è¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç ï¼š requirepass &lt;password&gt; æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œ 1ps -ef | grep -i redis è¿œç¨‹è¿æ¥redis 1redis-cli -h &lt;ip&gt; -p &lt;port&gt; -a &lt;password&gt;","link":"/2019/12/06/redis-conf/"},{"title":"redisåŸºæœ¬é…ç½®åŠå¼€å…³","text":"redisåŸºæœ¬é…ç½®åŠå¼€å…³ é…ç½®redisæœåŠ¡ç«¯ å…è®¸è¿œç¨‹è®¿é—® æ³¨é‡Šæ‰ bind 127.0.0.1 ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ å°†daemonize no æ”¹ä¸º daemonize yes Java è¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç ï¼š requirepass &lt;password&gt; æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œ 1ps -ef | grep -i redis è¿œç¨‹è¿æ¥redis 1redis-cli -h &lt;ip&gt; -p &lt;port&gt; -a &lt;password&gt; rediså…³é—­ æ–­ç”µ(éæ­£å¸¸å…³é—­ï¼Œå®¹æ˜“æ•°æ®ä¸¢å¤±) æŸ¥è¯¢PID: 123ps -ef | grep -i redis# Thenkill -9 &lt;PID&gt; é€šè¿‡å®¢æˆ·ç«¯å…³é—­(æ­£å¸¸å…³é—­ï¼Œæ•°æ®ä¿å­˜) 1SHUTDOWN redisåŠ è½½é…ç½®æ–‡ä»¶å¼€å¯ 1redis-server /usr/local/redis/redis.conf","link":"/2019/12/06/redis%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%BC%80%E5%85%B3/"},{"title":"validation-api","text":"validation-api JSR303/JSR-349ï¼Œhibernate validatorï¼Œspring validationä¹‹é—´çš„å…³ç³» JSR303æ˜¯ä¸€é¡¹æ ‡å‡†,JSR-349æ˜¯å…¶çš„å‡çº§ç‰ˆæœ¬ï¼Œæ·»åŠ äº†ä¸€äº›æ–°ç‰¹æ€§ï¼Œä»–ä»¬è§„å®šä¸€äº›æ ¡éªŒè§„èŒƒå³æ ¡éªŒæ³¨è§£ï¼Œå¦‚@Nullï¼Œ@NotNullï¼Œ@Patternï¼Œä»–ä»¬ä½äºjavax.validation.constraintsåŒ…ä¸‹ï¼Œåªæä¾›è§„èŒƒä¸æä¾›å®ç°ã€‚è€Œhibernate-validatoræ˜¯å¯¹è¿™ä¸ªè§„èŒƒçš„å®è·µï¼ˆä¸è¦å°†hibernateå’Œæ•°æ®åº“ormæ¡†æ¶è”ç³»åœ¨ä¸€èµ·ï¼‰ï¼Œä»–æä¾›äº†ç›¸åº”çš„å®ç°ï¼Œå¹¶å¢åŠ äº†ä¸€äº›å…¶ä»–æ ¡éªŒæ³¨è§£ï¼Œå¦‚@Emailï¼Œ@Lengthï¼Œ@Rangeç­‰ç­‰ï¼Œä»–ä»¬ä½äºorg.hibernate.validator.constraintsåŒ…ä¸‹ã€‚è€Œä¸‡èƒ½çš„springä¸ºäº†ç»™å¼€å‘è€…æä¾›ä¾¿æ·ï¼Œå¯¹hibernate validatorè¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œ ä½¿ç”¨validation-apiï¼Œé€šè¿‡æ³¨è§£å½¢å¼è¿›è¡Œæ•°æ®æ ¡éªŒ ä¾èµ–åŒ…å«å…³ç³» æ ¡éªŒæ³¨è§£åŒ…å«åœ¨spring-boot-starter-webé‡Œé¢ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; æŸ¥çœ‹spring-boot-starter-webçš„å­ä¾èµ–ï¼š 123456789101112&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; &lt;version&gt;2.2.1.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; å­ä¾èµ–ä¸­åŒ…å«äº†spring-boot-starter-validationï¼Œå†æŸ¥çœ‹è¯¥ä¾èµ–çš„å­ä¾èµ–ï¼š 123456789101112131415161718&lt;dependency&gt; &lt;groupId&gt;jakarta.validation&lt;/groupId&gt; &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt; &lt;version&gt;2.0.1&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt; &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt; &lt;version&gt;6.0.18.Final&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;validation-api&lt;/artifactId&gt; &lt;groupId&gt;javax.validation&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; å¯ä»¥å‘ç°ï¼Œè¯¥å­ä¾èµ–ä¸­åŒ…å«äº†validation-apiï¼ŒåŒæ—¶åŒ…å«äº†å®ƒçš„å®ç°hibernate-validator validation-apiåŸºæœ¬æ³¨è§£ é™åˆ¶ è¯´æ˜ @Null é™åˆ¶åªèƒ½ä¸ºnull @NotNull é™åˆ¶å¿…é¡»ä¸èƒ½ä¸ºnull @AssertFalse é™åˆ¶å¿…é¡»ä¸ºfalse @AssertTrue é™åˆ¶å¿…é¡»ä¸ºtrue @DecimalMax(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å¤§äºæŒ‡å®šå€¼çš„æ•°å­— @DecimalMin(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å°äºæŒ‡å®šå€¼çš„æ•°å­— @Digits(integer,fraction) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªå°æ•°ï¼Œä¸”æ•´æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡integerï¼Œå°æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡fraction @Future é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ @FutureOrPresent é™åˆ¶å¿…é¡»æ˜¯å°†æ¥çš„æ—¥æœŸæˆ–ç°åœ¨ @PastOrPresent é™åˆ¶å¿…é¡»æ˜¯è¿‡å»çš„æ—¥æœŸæˆ–ç°åœ¨ @Past é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ @Min(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å°äºæŒ‡å®šå€¼çš„æ•°å­—,@Min and @Max supports primitives and their wrappers. @Max(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å¤§äºæŒ‡å®šå€¼çš„æ•°å­— @Pattern(regrexp) é™åˆ¶å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡regrexpæŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼ @Size(max,min) é™åˆ¶å­—ç¬¦é•¿åº¦å¿…é¡»åœ¨minåˆ°maxä¹‹é—´ï¼Œsupports String, Collection, Map and arrays @NotEmpty éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸ä¸ºnullä¸”ä¸ä¸ºç©ºï¼ˆå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0ã€é›†åˆå¤§å°ä¸ä¸º0ï¼‰ @NotBlank éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸ä¸ºç©ºï¼ˆä¸ä¸ºnullã€å»é™¤é¦–ä½ç©ºæ ¼åé•¿åº¦ä¸º0ï¼‰ï¼Œä¸åŒäº@NotEmptyï¼Œ@NotBlankåªåº”ç”¨äºå­—ç¬¦ä¸²ä¸”åœ¨æ¯”è¾ƒæ—¶ä¼šå»é™¤å­—ç¬¦ä¸²çš„ç©ºæ ¼(The difference to @NotEmpty is that this constraint can only be applied on character sequences and that trailing white-spaces are ignored.) @Email(regrexp, flags) éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼æ˜¯Emailï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å’ŒflagæŒ‡å®šè‡ªå®šä¹‰çš„emailæ ¼å¼ æ³¨æ„ 1. å¯¹dto(@RequestBody)è¿›è¡Œæ•°æ®æ ¡éªŒ ç›´æ¥åœ¨dtoçš„ç±»ä¸­çš„å±æ€§ä¸ŠåŠ ä¸Šæ ¡éªŒæ³¨è§£ã€‚ä½†æ˜¯ä»…ä»…è¿™æ ·çš„è¯ï¼Œè¯¥æ³¨è§£ä¸ä¼šç”Ÿæ•ˆ éœ€è¦åœ¨controllerä¸­éœ€è¦æ ¡éªŒçš„å‚æ•°å‰åŠ ä¸Š@Validatedæ³¨è§£ï¼š e.g. 123456@PostMapping(\"/register\")public ResultEntity register(@Validated @RequestBody CustomerRequest customerRequest){ customerService.register(customerRequest); return ResultEntity.succeed();} 2. å¯¹GETè¯·æ±‚çš„å‚æ•°(@RequestParam)è¿›è¡Œæ•°æ®æ ¡éªŒ å¯¹@RequestParamæ³¨è§£çš„å‚æ•°é€šå¸¸æ²¡æœ‰ä¸“é—¨çš„ç±»ï¼Œéœ€è¦ç›´æ¥åœ¨controlleræ–¹æ³•çš„å‚æ•°å¤„åŠ ä¸Šæ ¡éªŒæ³¨è§£ï¼š 123456@GetMapping(\"/check-code\") public ResultEntity sendCheckCode(@RequestParam @Email(message = \"å¿…é¡»ä¸ºåˆæ³•é‚®ç®±åœ°å€\") String email) { customerService.sendCheckCode(email); return ResultEntity.succeed(); } ä»…ä»…è¿™æ ·ï¼Œæ³¨è§£ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚åˆ‡è®°éœ€è¦åœ¨controllerç±»ä¸ŠåŠ å…¥@Validatedæ³¨è§£æ‰å¯ä»¥ç”Ÿæ•ˆï¼š 12345@Slf4j@RestController@Validated // å¯¹@RequestParamçš„æ ¡éªŒéœ€è¦åœ¨controllerä¸ŠåŠ @Validatedæ³¨è§£@RequestMapping(\"/customer\")public class CustomerController { å®˜æ–¹æ–‡æ¡£ https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints","link":"/2019/12/23/validation-api/"},{"title":"Java-Map","text":"Java-Map å—åˆ°ä¸Šç¯‡C++ STLä¸­mapçš„æ’åºæ–¹å¼çš„å¯å‘ï¼Œè¿™æ¬¡åˆæ¥æ¢ç©¶ä¸€ä¸‹Javaä¸­å¯¹äºmapçš„ä¸åŒæ’åºæ–¹å¼ ä¾ç„¶åˆ†ä¸ºä¸¤ç§æ’åº Sort By Key Sort By Value æ‰“å°map æ‰“å°mapçš„å…ƒç´ ä½¿ç”¨ä»¥ä¸‹çš„show()æ–¹æ³•ï¼š 1234567public static void show(Map&lt;String, Integer&gt; map) { for (Map.Entry&lt;String, Integer&gt; entry: map.entrySet()) { System.out.println(entry.getKey() + \" \" + entry.getValue()); } System.out.println(\"=======================\"); System.out.println();} Sort By Value å‡åº Javaä¸­å¯¹äºMapçš„valueè¿›è¡Œæ’åºä¾ç„¶éœ€è¦å€ŸåŠ©å…¶ä»–å®¹å™¨ï¼Œè¿™é‡Œä½¿ç”¨ArrayList 12345678910111213141516171819202122232425262728 /** * è·å–æŒ‰ç…§valueå‡åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByValueAsc(Map&lt;String, Integer&gt; map) { List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(map.entrySet()); // å‡åº Collections.sort(list, (e1, e2) -&gt; e1.getValue().compareTo(e2.getValue())); Map&lt;String, Integer&gt; sortedMap = new LinkedHashMap&lt;&gt;(); for (Map.Entry&lt;String, Integer&gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; }public static void main(String[] args) { Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(\"boss\", 2); map.put(\"abuse\", 1); map.put(\"unit\", 3); map.put(\"duty\", 4); // æ ¹æ®Valueå‡åºæ’åº System.out.println(\"ğŸš€ SORT BY VALUE ASC:\"); Map&lt;String, Integer&gt; sortedMapAsc = sortByValueAsc(map); show(sortedMapAsc);} è¿™é‡Œå°†Mapä¸­çš„entryéƒ½æ”¾åˆ°äº†ä¸€ä¸ªListä¸­ï¼Œç„¶åä½¿ç”¨è‡ªå®šä¹‰Comparatorçš„æ–¹å¼å¯¹entryè¿›è¡Œæ’åºï¼› åŒæ—¶ä¹Ÿä½¿ç”¨äº†ä¸€ç§æ–°çš„Mapâ€“LinkedHashMap LinkedHashMapæ˜¯æœ‰åºçš„ï¼Œå®ƒä¼šæŒ‰ç…§å…ƒç´ çš„æ’å…¥é¡ºåºå¯¹å…ƒç´ è¿›è¡Œæ’åº ç»“æœå¦‚ä¸‹: 123456ğŸš€ SORT BY VALUE ASC:abuse 1boss 2unit 3duty 4======================= é™åº åŒç†ï¼Œåªæ˜¯æ›´æ¢ä¸€ä¸‹Comparatorï¼š 12345678910111213141516171819202122232425262728/** * è·å–æŒ‰ç…§valueé™åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByValueDesc(Map&lt;String, Integer&gt; map) { List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(map.entrySet()); // é™åº Collections.sort(list, (e1, e2) -&gt; e2.getValue().compareTo(e1.getValue())); Map&lt;String, Integer&gt; sortedMap = new LinkedHashMap&lt;&gt;(); for (Map.Entry&lt;String, Integer&gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } public static void main(String[] args) { Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(\"boss\", 2); map.put(\"abuse\", 1); map.put(\"unit\", 3); map.put(\"duty\", 4); // æ ¹æ®Valueé™åºæ’åº System.out.println(\"ğŸš€ SORT BY VALUE DESC\"); Map&lt;String, Integer&gt; sortedMapDesc = sortByValueDesc(map); show(sortedMapDesc); } ç»“æœå¦‚ä¸‹: 123456ğŸš€ SORT BY VALUE DESCduty 4unit 3boss 2abuse 1======================= Sort By Key å‡åº å¯¹äºkeyçš„æ’åºä¹Ÿå¯ä»¥æŒ‰ç…§å¯¹valueçš„æ’åºä¸€æ ·ï¼Œå€ŸåŠ©ArrayListå’ŒLinkedHashMapï¼Œä½†è¿™é‡Œé‡‡ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œå€ŸåŠ©TreeMapè¿›è¡Œæ’åº TreeMapæ˜¯å¦ä¸€ç§Mapï¼Œä¼šå¯¹Mapä¸­çš„å…ƒç´ æŒ‰ç…§keyå¤§å°è¿›è¡Œæ’åº 12345678910111213141516171819202122232425262728 /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å‡åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyå‡åºæ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByKeyByTreeMapAsc(Map&lt;String, Integer&gt; map) { /* The naturalOrder() method of Comparator Interface in Java returns a comparator that use to compare Comparable objects in natural order. */ Map&lt;String, Integer&gt; sortedMap = new TreeMap&lt;&gt;(Comparator.naturalOrder()); sortedMap.putAll(map); return sortedMap; }public static void main(String[] args) { Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(\"boss\", 2); map.put(\"abuse\", 1); map.put(\"unit\", 3); map.put(\"duty\", 4); // æ ¹æ®Keyå‡åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼ System.out.println(\"ğŸš€ SORT BY KEY ASC\"); Map&lt;String, Integer&gt; sortedByKeyAsc = sortByKeyByTreeMapAsc(map); show(sortedByKeyAsc); } å¯¹Comparableå¯¹è±¡çš„å‡åºæ’åºå¯ä»¥ä½¿ç”¨Comparator.naturalOrder()è¿”å›çš„Comparatoræ¥æŒ‡å®š æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹: 123456ğŸš€ SORT BY KEY ASCabuse 1boss 2duty 4unit 3======================= é™åº åŒç†ï¼Œåªæ˜¯éœ€è¦æ›´æ”¹Comparatorï¼š 123456789101112131415161718192021222324252627/** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å°†åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyé™åºæ’å¥½åºçš„map */public static Map&lt;String, Integer&gt; sortByKeyByTreeMapDesc(Map&lt;String, Integer&gt; map) { /* The reverseOrder() Returns a comparator that imposes the reverse of the natural ordering. */ Map&lt;String, Integer&gt; sortedMap = new TreeMap&lt;&gt;(Comparator.reverseOrder()); sortedMap.putAll(map); return sortedMap;}public static void main(String[] args) { Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(\"boss\", 2); map.put(\"abuse\", 1); map.put(\"unit\", 3); map.put(\"duty\", 4); // æ ¹æ®Keyé™åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼ System.out.println(\"ğŸš€ SORT BY KEY DESC\"); Map&lt;String, Integer&gt; sortedByKeyDesc = sortByKeyByTreeMapDesc(map); show(sortedByKeyDesc);} å¯¹Comparableå¯¹è±¡çš„é™åºæ’åºå¯ä»¥ä½¿ç”¨Comparator.reverseOrder()è¿”å›çš„Comparatoræ¥æŒ‡å®š ç»“æœå¦‚ä¸‹: 123456ğŸš€ SORT BY KEY DESCunit 3duty 4boss 2abuse 1======================= å®Œæ•´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109import java.util.*;/** * @author HavenTong * @date 2020/3/5 5:34 ä¸‹åˆ */public class MapUtil { public static void show(Map&lt;String, Integer&gt; map) { for (Map.Entry&lt;String, Integer&gt; entry: map.entrySet()) { System.out.println(entry.getKey() + \" \" + entry.getValue()); } System.out.println(\"=======================\"); System.out.println(); } /** * è·å–æŒ‰ç…§valueå‡åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByValueAsc(Map&lt;String, Integer&gt; map) { List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(map.entrySet()); // å‡åº Collections.sort(list, (e1, e2) -&gt; e1.getValue().compareTo(e2.getValue())); Map&lt;String, Integer&gt; sortedMap = new LinkedHashMap&lt;&gt;(); for (Map.Entry&lt;String, Integer&gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } /** * è·å–æŒ‰ç…§valueé™åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByValueDesc(Map&lt;String, Integer&gt; map) { List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(map.entrySet()); // é™åº Collections.sort(list, (e1, e2) -&gt; e2.getValue().compareTo(e1.getValue())); Map&lt;String, Integer&gt; sortedMap = new LinkedHashMap&lt;&gt;(); for (Map.Entry&lt;String, Integer&gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å‡åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyå‡åºæ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByKeyByTreeMapAsc(Map&lt;String, Integer&gt; map) { /* The naturalOrder() method of Comparator Interface in Java returns a comparator that use to compare Comparable objects in natural order. */ Map&lt;String, Integer&gt; sortedMap = new TreeMap&lt;&gt;(Comparator.naturalOrder()); sortedMap.putAll(map); return sortedMap; } /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å°†åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyé™åºæ’å¥½åºçš„map */ public static Map&lt;String, Integer&gt; sortByKeyByTreeMapDesc(Map&lt;String, Integer&gt; map) { /* The reverseOrder() Returns a comparator that imposes the reverse of the natural ordering. */ Map&lt;String, Integer&gt; sortedMap = new TreeMap&lt;&gt;(Comparator.reverseOrder()); sortedMap.putAll(map); return sortedMap; } public static void main(String[] args) { Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(\"boss\", 2); map.put(\"abuse\", 1); map.put(\"unit\", 3); map.put(\"duty\", 4); // æ ¹æ®Valueå‡åºæ’åº System.out.println(\"ğŸš€ SORT BY VALUE ASC:\"); Map&lt;String, Integer&gt; sortedMapAsc = sortByValueAsc(map); show(sortedMapAsc); // æ ¹æ®Valueé™åºæ’åº System.out.println(\"ğŸš€ SORT BY VALUE DESC\"); Map&lt;String, Integer&gt; sortedMapDesc = sortByValueDesc(map); show(sortedMapDesc); // æ ¹æ®Keyå‡åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼ System.out.println(\"ğŸš€ SORT BY KEY ASC\"); Map&lt;String, Integer&gt; sortedByKeyAsc = sortByKeyByTreeMapAsc(map); show(sortedByKeyAsc); // æ ¹æ®Keyé™åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼ System.out.println(\"ğŸš€ SORT BY KEY DESC\"); Map&lt;String, Integer&gt; sortedByKeyDesc = sortByKeyByTreeMapDesc(map); show(sortedByKeyDesc); }}","link":"/2020/03/05/Java-Map/"},{"title":"Serializableæ¥å£","text":"Serializableæ¥å£ Serializableæ¥å£æ¦‚è¿° Serializableæ˜¯java.ioåŒ…ä¸­å®šä¹‰çš„ã€ç”¨äºå®ç°Javaç±»çš„åºåˆ—åŒ–æ“ä½œè€Œæä¾›çš„ä¸€ä¸ªè¯­ä¹‰çº§åˆ«çš„æ¥å£ã€‚Serializableåºåˆ—åŒ–æ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•æˆ–è€…å­—æ®µï¼Œåªæ˜¯ç”¨äºæ ‡è¯†å¯åºåˆ—åŒ–çš„è¯­ä¹‰ã€‚å®ç°äº†Serializableæ¥å£çš„ç±»å¯ä»¥è¢«ObjectOutputStreamè½¬æ¢ä¸ºå­—èŠ‚æµï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ObjectInputStreamå†å°†å…¶è§£æä¸ºå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶åï¼Œå†æ¬¡ä»æ–‡ä»¶ä¸­è¯»å–å®ƒå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä½¿ç”¨è¡¨ç¤ºå¯¹è±¡åŠå…¶æ•°æ®çš„ç±»å‹ä¿¡æ¯å’Œå­—èŠ‚åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚ è€Œè¿™ä¸€ç‚¹å¯¹äºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºæ— è®ºä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œå…¶åº•å±‚æ¶‰åŠIOæ“ä½œçš„éƒ¨åˆ†è¿˜æ˜¯ç”±æ“ä½œç³»ç»Ÿå…¶å¸®å…¶å®Œæˆçš„ï¼Œè€Œåº•å±‚IOæ“ä½œéƒ½æ˜¯ä»¥å­—èŠ‚æµçš„æ–¹å¼è¿›è¡Œçš„ï¼Œæ‰€ä»¥å†™æ“ä½œéƒ½æ¶‰åŠå°†ç¼–ç¨‹è¯­è¨€æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œè€Œè¯»æ“ä½œåˆ™åˆæ¶‰åŠå°†å­—èŠ‚æµè½¬åŒ–ä¸ºç¼–ç¨‹è¯­è¨€ç±»å‹çš„ç‰¹å®šæ•°æ®ç±»å‹ã€‚è€ŒJavaä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯¹è±¡ä½œä¸ºå…¶ä¸»è¦æ•°æ®çš„ç±»å‹è½½ä½“ï¼Œä¸ºäº†å®Œæˆå¯¹è±¡æ•°æ®çš„è¯»å†™æ“ä½œï¼Œä¹Ÿå°±éœ€è¦ä¸€ç§æ–¹å¼æ¥è®©JVMçŸ¥é“åœ¨è¿›è¡ŒIOæ“ä½œæ—¶å¦‚ä½•å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œä»¥åŠå¦‚ä½•å°†å­—èŠ‚æµæ•°æ®è½¬æ¢ä¸ºç‰¹å®šçš„å¯¹è±¡ï¼Œè€ŒSerializableæ¥å£å°±æ‰¿æ‹…äº†è¿™æ ·ä¸€ä¸ªè§’è‰²ã€‚ ä¸‹é¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¾‹å­æ¥å®ç°å°†åºåˆ—åŒ–çš„å¯¹è±¡å­˜å‚¨åˆ°æ–‡ä»¶ï¼Œç„¶åå†å°†å…¶ä»æ–‡ä»¶ä¸­ååºåˆ—åŒ–ä¸ºå¯¹è±¡ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š å…ˆå®šä¹‰ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡Userï¼š 1234567891011public class User implements Serializable { private static final long serialVersionUID = 1L; private String userId; private String userName; public User(String userId, String userName) { this.userId = userId; this.userName = userName; } } ç„¶åæˆ‘ä»¬ç¼–å†™æµ‹è¯•ç±»ï¼Œæ¥å¯¹è¯¥å¯¹è±¡è¿›è¡Œè¯»å†™æ“ä½œï¼Œæˆ‘ä»¬å…ˆæµ‹è¯•å°†è¯¥å¯¹è±¡å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼š 1234567891011121314151617181920public class SerializableTest { /** * å°†Userå¯¹è±¡ä½œä¸ºæ–‡æœ¬å†™å…¥ç£ç›˜ */ public static void writeObj() { User user = new User(\"1001\", \"Joe\"); try { ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(\"/Users/guanliyuan/user.txt\")); objectOutputStream.writeObject(user); objectOutputStream.close(); } catch (IOException e) { e.printStackTrace(); } } public static void main(String args[]) { writeObj(); } } è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å°±å°†Userå¯¹è±¡åŠå…¶æºå¸¦çš„æ•°æ®å†™å…¥äº†æ–‡æœ¬user.txtä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹user.txtä¸­å­˜å‚¨çš„æ•°æ®æ­¤æ—¶æ˜¯ä¸ªä»€ä¹ˆæ ¼å¼ï¼š 12345java.io.NotSerializableException: cn.wudimanong.serializable.User at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184) at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348) at cn.wudimanong.serializable.SerializableTest.writeObj(SerializableTest.java:19) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:27) æˆ‘ä»¬çœ‹åˆ°å¯¹è±¡æ•°æ®ä»¥äºŒè¿›åˆ¶æ–‡æœ¬çš„æ–¹å¼è¢«æŒä¹…åŒ–åˆ°äº†ç£ç›˜æ–‡ä»¶ä¸­ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸‹å°†Userå®ç°Serializableæ¥å£çš„ä»£ç éƒ¨åˆ†å»æ‰ï¼Œçœ‹çœ‹æ­¤æ—¶å†™æ“ä½œæ˜¯å¦è¿˜èƒ½æˆåŠŸï¼Œç»“æœå¦‚ä¸‹ï¼š ç»“æœä¸å‡ºæ‰€æ–™ï¼Œæœç„¶æ˜¯ä¸å¯ä»¥çš„ï¼ŒæŠ›å‡ºäº†NotSerializableExceptionå¼‚å¸¸ï¼Œæç¤ºéå¯åºåˆ—åŒ–å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰å®ç°Serializableæ¥å£çš„å¯¹è±¡æ˜¯æ— æ³•é€šè¿‡IOæ“ä½œæŒä¹…åŒ–çš„ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­ç¼–å†™æµ‹è¯•ä»£ç ï¼Œå°è¯•å°†ä¹‹å‰æŒä¹…åŒ–å†™å…¥user.txtæ–‡ä»¶çš„å¯¹è±¡æ•°æ®å†æ¬¡è½¬åŒ–ä¸ºJavaå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324public class SerializableTest { /** * å°†ç±»ä»æ–‡æœ¬ä¸­æå–å¹¶èµ‹å€¼ç»™å†…å­˜ä¸­çš„ç±» */ public static void readObj() { try { ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(\"/Users/guanliyuan/user.txt\")); try { Object object = objectInputStream.readObject(); User user = (User) object; System.out.println(user); } catch (ClassNotFoundException e) { e.printStackTrace(); } } catch (IOException e) { e.printStackTrace(); } } public static void main(String args[]) { readObj(); } } é€šè¿‡ååºåˆ—åŒ–æ“ä½œï¼Œå¯ä»¥å†æ¬¡å°†æŒä¹…åŒ–çš„å¯¹è±¡å­—èŠ‚æµæ•°æ®é€šè¿‡IOè½¬åŒ–ä¸ºJavaå¯¹è±¡ï¼Œç»“æœå¦‚ä¸‹ï¼š 1cn.wudimanong.serializable.User@6f496d9f æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å†æ¬¡å°è¯•å°†Userå®ç°Serializableæ¥å£çš„ä»£ç éƒ¨åˆ†å»æ‰ï¼Œå‘ç°ä¹Ÿæ— æ³•å†æ–‡æœ¬è½¬æ¢ä¸ºåºåˆ—åŒ–å¯¹è±¡ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºï¼š 12345678ava.io.InvalidClassException: cn.wudimanong.serializable.User; class invalid for deserialization at java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(ObjectStreamClass.java:157) at java.io.ObjectStreamClass.checkDeserialize(ObjectStreamClass.java:862) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2038) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1568) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:428) at cn.wudimanong.serializable.SerializableTest.readObj(SerializableTest.java:31) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:44) æç¤ºéæ³•ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œè¯´æ˜åœ¨Javaä¸­å¦‚ä½•è¦å®ç°å¯¹è±¡çš„IOè¯»å†™æ“ä½œï¼Œéƒ½å¿…é¡»å®ç°Serializableæ¥å£ï¼Œå¦åˆ™ä»£ç å°±ä¼šæŠ¥é”™! åºåˆ—åŒ–&amp;ååºåˆ—åŒ– é€šè¿‡ä¸Šé¢çš„é˜è¿°å’Œç¤ºä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å¯¹Serializableæ¥å£çš„ä½œç”¨æ˜¯æœ‰äº†æ¯”è¾ƒå…·ä½“çš„ä½“ä¼šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸Šå±‚åˆ°ç†è®ºå±‚é¢ï¼Œçœ‹ä¸‹åˆ°åº•ä»€ä¹ˆæ˜¯åºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚åºåˆ—åŒ–æ˜¯æŒ‡æŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¯¹è±¡çš„åºåˆ—åŒ–ï¼Œå°±æ˜¯æŠŠå†…å­˜ä¸­çš„è¿™äº›å¯¹è±¡å˜æˆä¸€è¿ä¸²çš„å­—èŠ‚(bytes)æè¿°çš„è¿‡ç¨‹ã€‚ è€Œååºåˆ—åŒ–åˆ™ç›¸åï¼Œå°±æ˜¯æŠŠæŒä¹…åŒ–çš„å­—èŠ‚æ–‡ä»¶æ•°æ®æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–å‘¢? å¤§æ¦‚æœ‰è¿™æ ·ä¸¤ç±»æ¯”è¾ƒå¸¸è§çš„åœºæ™¯ï¼š éœ€è¦æŠŠå†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€æ•°æ®ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­çš„æ—¶å€™ï¼Œè¿™ä¸ªåœºæ™¯æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬åˆ©ç”¨mybatisæ¡†æ¶ç¼–å†™æŒä¹…å±‚insertå¯¹è±¡æ•°æ®åˆ°æ•°æ®åº“ä¸­æ—¶ ç½‘ç»œé€šä¿¡æ—¶éœ€è¦ç”¨å¥—æ¥å­—åœ¨ç½‘ç»œä¸­ä¼ é€å¯¹è±¡æ—¶ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨RPCåè®®è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ å…³äºserialVersionUID å¯¹äºJVMæ¥è¯´ï¼Œè¦è¿›è¡ŒæŒä¹…åŒ–çš„ç±»å¿…é¡»è¦æœ‰ä¸€ä¸ªæ ‡è®°ï¼Œåªæœ‰æŒæœ‰è¿™ä¸ªæ ‡è®°JVMæ‰å…è®¸ç±»åˆ›å»ºçš„å¯¹è±¡å¯ä»¥é€šè¿‡å…¶IOç³»ç»Ÿè½¬æ¢ä¸ºå­—èŠ‚æ•°æ®ï¼Œä»è€Œå®ç°æŒä¹…åŒ–ï¼Œè€Œè¿™ä¸ªæ ‡è®°å°±æ˜¯Serializableæ¥å£ã€‚è€Œåœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­åˆ™éœ€è¦ä½¿ç”¨serialVersionUIDæ¥ç¡®å®šç”±é‚£ä¸ªç±»æ¥åŠ è½½è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ç°Serializableæ¥å£çš„æ—¶å€™ï¼Œä¸€èˆ¬è¿˜ä¼šè¦å»å°½é‡æ˜¾ç¤ºåœ°å®šä¹‰serialVersionUIDï¼Œå¦‚ï¼š 1private static final long serialVersionUID = 1L; åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ¥æ”¶æ–¹ä¸ºå¯¹è±¡åŠ è½½äº†ä¸€ä¸ªç±»ï¼Œå¦‚æœè¯¥å¯¹è±¡çš„serialVersionUIDä¸å¯¹åº”æŒä¹…åŒ–æ—¶çš„ç±»ä¸åŒï¼Œé‚£ä¹ˆååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å°†ä¼šå¯¼è‡´InvalidClassExceptionå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰ååºåˆ—åŒ–çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ•…æ„å°†Userç±»çš„serialVersionUIDæ”¹ä¸º2Lï¼Œå¦‚ï¼š 1private static final long serialVersionUID = 2L; é‚£ä¹ˆæ­¤æ—¶ï¼Œåœ¨ååºä¾‹åŒ–æ—¶å°±ä¼šå¯¼è‡´å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š 123456789java.io.InvalidClassException: cn.wudimanong.serializable.User; local class incompatible: stream classdesc serialVersionUID = 1, local class serialVersionUID = 2 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:687) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1880) at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1746) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2037) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1568) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:428) at cn.wudimanong.serializable.SerializableTest.readObj(SerializableTest.java:31) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:44) å¦‚æœæˆ‘ä»¬åœ¨åºåˆ—åŒ–ä¸­æ²¡æœ‰æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDï¼Œåˆ™åºåˆ—åŒ–è¿è¡Œæ—¶å°†ä¼šæ ¹æ®è¯¥ç±»çš„å„ä¸ªæ–¹é¢è®¡ç®—è¯¥ç±»é»˜è®¤çš„serialVersionUIDå€¼ã€‚ä½†æ˜¯ï¼ŒJavaå®˜æ–¹å¼ºçƒˆå»ºè®®æ‰€æœ‰è¦åºåˆ—åŒ–çš„ç±»éƒ½æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDå­—æ®µï¼Œå› ä¸ºå¦‚æœé«˜åº¦ä¾èµ–äºJVMé»˜è®¤ç”ŸæˆserialVersionUIDï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä¸ç¼–è¯‘å™¨çš„å®ç°ç»†èŠ‚è€¦åˆï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–çš„InvalidClassExceptionå¼‚å¸¸ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯è·¨ä¸åŒJavaç¼–è¯‘å™¨å®ç°çš„serialVersionUIDå€¼çš„ä¸€è‡´ï¼Œå®ç°Serializableæ¥å£çš„å¿…é¡»æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDå­—æ®µã€‚ æ­¤å¤–serialVersionUIDå­—æ®µåœ°å£°æ˜è¦å°½å¯èƒ½ä½¿ç”¨privateå…³é”®å­—ä¿®é¥°ï¼Œè¿™æ˜¯å› ä¸ºè¯¥å­—æ®µçš„å£°æ˜åªé€‚ç”¨äºå£°æ˜çš„ç±»ï¼Œè¯¥å­—æ®µä½œä¸ºæˆå‘˜å˜é‡è¢«å­ç±»ç»§æ‰¿æ˜¯æ²¡æœ‰ç”¨å¤„çš„!æœ‰ä¸ªç‰¹æ®Šçš„åœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„ç±»æ˜¯ä¸èƒ½æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDçš„ï¼Œå› ä¸ºå®ƒä»¬å§‹ç»ˆå…·æœ‰é»˜è®¤è®¡ç®—çš„å€¼ï¼Œä¸è¿‡æ•°ç»„ç±»ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯æ”¾å¼ƒäº†åŒ¹é…serialVersionUIDå€¼çš„è¦æ±‚ã€‚","link":"/2019/11/19/Serializable%E6%8E%A5%E5%8F%A3/"},{"title":"Spring Boot-JDBC","text":"Spring Boot &amp; JDBC 1. Spring Bootæ•´åˆJDBCæ“ä½œæ•°æ®åº“ JDBCæ“ä½œæ•°æ®åº“æµç¨‹ åŠ è½½æ•°æ®åº“é©±åŠ¨ å»ºç«‹æ•°æ®åº“è¿æ¥ åˆ›å»ºæ•°æ®åº“æ“ä½œå¯¹è±¡ å®šä¹‰æ“ä½œçš„SQLè¯­å¥ æ‰§è¡Œæ•°æ®åº“æ“ä½œ è·å–å¹¶æ“ä½œç»“æœé›† å…³é—­å¯¹è±¡ï¼Œå›æ”¶èµ„æº ä¸å»ºè®®ä½¿ç”¨JDBC å°†Spring JDBCæ•´åˆåˆ°Spring Boot pom.xmlå¼•å…¥ä¾èµ– 12345678910111213&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jdbc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;version&gt;2.1.8.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.16&lt;/version&gt; &lt;/dependency&gt; ä¿®æ”¹application.yml 123456spring: datasource: url: jdbc:mysql://localhost:3306/jdbc username: root password: Thwf1858 driver-class-name: com.mysql.jdbc.Driver DAOå±‚ä»£ç  jdbcTemplate.updateé€‚ç”¨äºinsert, updateå’Œdeleteæ“ä½œ jdbcTemplate.queryForObjectç”¨äºæŸ¥è¯¢å•æ¡è®°å½•å¹¶è¿”å›ç»“æœ jdbcTemplate.queryç”¨äºæŸ¥è¯¢ç»“æœåˆ—è¡¨ BeanPropertyRowMapperå¯ä»¥å°†æ•°æ®åº“å­—æ®µçš„å€¼å‘æ•°æ®åº“æ˜ å°„ï¼Œæ»¡è¶³é©¼å³°æ ‡è¯†ä¹Ÿå¯ä»¥è‡ªåŠ¨æ˜ å°„ e.x. æ•°æ®åº“create_timeæ˜ å°„åˆ°createTimeå±æ€§ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package com.haven.dao;import com.fasterxml.jackson.databind.BeanProperty;import com.haven.model.Article;import org.springframework.jdbc.core.BeanPropertyRowMapper;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;import javax.annotation.Resource;import java.util.List;/** * @author HavenTong * @date 2019/10/30 10:39 ä¸‹åˆ */@Repository // @Repositoryæ ‡æ³¨æŒä¹…å±‚ public class ArticleJDBCDAO { @Resource private JdbcTemplate jdbcTemplate; // ä¿å­˜æ–‡ç«  public void save(Article article){ jdbcTemplate.update(\"INSERT INTO article(author, title, content, create_time) values (?,?,?,?)\", article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime()); } // åˆ é™¤æ–‡ç«  // ä¼ å‚å¯ä»¥ç”¨ new Object[]{}ä¼ ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªä¸€ä¸ªè®¾ç½® public void deleteById(int id){ jdbcTemplate.update(\"DELETE FROM article WHERE id=?\", new Object[]{id}); } // æ›´æ–°æ–‡ç«  public void updateById(Article article){ jdbcTemplate.update(\"UPDATE article SET author=?, title=?, content=?, create_time=? WHERE id=?\", article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime(), article.getId()); } // æ ¹æ®idæŸ¥æ‰¾æ–‡ç«  public Article findById(int id){ return (Article)jdbcTemplate.queryForObject(\"SELECT * FROM article WHERE id = ?\", new Object[]{id}, new BeanPropertyRowMapper(Article.class)); } // æŸ¥è¯¢æ‰€æœ‰ public List&lt;Article&gt; findAll(){ return (List&lt;Article&gt;) jdbcTemplate.query(\"SELECT * FROM article\", new BeanPropertyRowMapper(Article.class)); }} 2. JDBCå¤šæ•°æ®æº (1) application.ymlé…ç½®ä¸¤ä¸ªæ•°æ®æºï¼Œç¬¬ä¸€ä¸ªå«primary, ç¬¬äºŒä¸ªå«secondar,ä¹Ÿå¯ä»¥è‡ªå·±å–å: 1234567891011121314151617server: port: 8080spring: jackson: date-format: yyyy-MM-dd HH:mm:ss time-zone: GMT+8 datasource: primary: jdbc-url: jdbc:mysql://localhost:3306/jdbc username: root password: Thwf1858 driver-class-name: com.mysql.jdbc.Driver secondary: jdbc-url: jdbc:mysql://localhost:3306/test username: root password: Thwf1858 driver-class-name: com.mysql.jdbc.Driver (2) é€šè¿‡Java Configå°†æ•°æ®æºæ³¨å…¥åˆ°Springä¸Šä¸‹æ–‡ primaryJdbcTemplateä½¿ç”¨primaryDataSourceæ•°æ®æºæ“ä½œæ•°æ®åº“jdbc secondaryJdbcTemplateä½¿ç”¨secondaryDataSourceæ•°æ®æºæ“ä½œæ•°æ®åº“test DataSourceConfig.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.haven.config;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.boot.jdbc.DataSourceBuilder;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.Primary;import org.springframework.jdbc.core.JdbcTemplate;import javax.sql.DataSource;import javax.xml.crypto.Data;/** * @author HavenTong * @date 2019/10/31 12:08 ä¸Šåˆ */@Configurationpublic class DataSourceConfig { @Primary @Bean(name = \"primaryDataSource\") @Qualifier(\"primaryDataSource\") @ConfigurationProperties(prefix = \"spring.datasource.primary\") public DataSource primaryDataSource(){ return DataSourceBuilder.create().build(); } @Bean(name = \"secondaryDataSource\") @Qualifier(\"secondaryDataSource\") @ConfigurationProperties(prefix = \"spring.datasource.secondary\") public DataSource secondaryDataSource(){ return DataSourceBuilder.create().build(); } @Bean(name = \"primaryJdbcTemplate\") public JdbcTemplate primaryJdbcTemplate( @Qualifier(\"primaryDataSource\") DataSource dataSource ){ return new JdbcTemplate(dataSource); } @Bean(name = \"secondaryJdbcTemplate\") public JdbcTemplate secondaryTemplate( @Qualifier(\"secondaryDataSource\") DataSource dataSource){ return new JdbcTemplate(dataSource); }} (3) ä¹‹åä¿®æ”¹daoå±‚ä»£ç : ArticleJDBCDAO.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.haven.dao;import com.fasterxml.jackson.databind.BeanProperty;import com.haven.model.Article;import org.springframework.jdbc.core.BeanPropertyRowMapper;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;import javax.annotation.Resource;import java.util.List;/** * @author HavenTong * @date 2019/10/30 10:39 ä¸‹åˆ */@Repositorypublic class ArticleJDBCDAO { // ä¿å­˜æ–‡ç«  public void save(Article article, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\"INSERT INTO article(author, title, content, create_time) values (?,?,?,?)\", article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime()); } // åˆ é™¤æ–‡ç«  public void deleteById(int id, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\"DELETE FROM article WHERE id=?\", new Object[]{id}); } // æ›´æ–°æ–‡ç«  public void updateById(Article article, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\"UPDATE article SET author=?, title=?, content=?, create_time=? WHERE id=?\", article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime(), article.getId()); } // æ ¹æ®idæŸ¥æ‰¾æ–‡ç«  public Article findById(int id, JdbcTemplate jdbcTemplate){ return (Article)jdbcTemplate.queryForObject(\"SELECT * FROM article WHERE id = ?\", new Object[]{id}, new BeanPropertyRowMapper(Article.class)); } // æŸ¥è¯¢æ‰€æœ‰ public List&lt;Article&gt; findAll(JdbcTemplate jdbcTemplate){ return (List&lt;Article&gt;) jdbcTemplate.query(\"SELECT * FROM article\", new BeanPropertyRowMapper(Article.class)); }} (4) ä¿®æ”¹serviceå±‚ä»£ç  ArticleRestJDBCServiceImpl.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package com.haven.service;import com.haven.dao.ArticleJDBCDAO;import com.haven.model.Article;import lombok.extern.slf4j.Slf4j;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import javax.annotation.Resource;import java.util.List;/** * @author HavenTong * @date 2019/10/30 10:56 ä¸‹åˆ */@Slf4j@Servicepublic class ArticleRestJDBCServiceImpl implements ArticleRestService { @Resource ArticleJDBCDAO articleJDBCDAO; @Resource JdbcTemplate primaryJdbcTemplate; @Resource JdbcTemplate secondaryJdbcTemplate; @Transactional @Override public Article saveArticle(Article article) { articleJDBCDAO.save(article, primaryJdbcTemplate); articleJDBCDAO.save(article, secondaryJdbcTemplate); return article; } @Override public void deleteArticle(int id) { articleJDBCDAO.deleteById(id, primaryJdbcTemplate); articleJDBCDAO.deleteById(id, secondaryJdbcTemplate); } @Override public void updateArticle(Article article) { articleJDBCDAO.updateById(article, primaryJdbcTemplate); } @Override public Article getArticle(int id) { return articleJDBCDAO.findById(id, primaryJdbcTemplate); } @Override public List&lt;Article&gt; getAll() { return articleJDBCDAO.findAll(primaryJdbcTemplate); }} 3. Spring JDBC JTAå®ç°åˆ†å¸ƒå¼äº‹åŠ¡ @Transactionalæ— æ³•è·¨åº“å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡ é€šè¿‡æ•´åˆJTAå®ç°åˆ†å¸ƒå¼äº‹åŠ¡ å¼•å…¥mavenä¾èµ– 123456&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jta-atomikos --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jta-atomikos&lt;/artifactId&gt; &lt;version&gt;2.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; ä¿®æ”¹application.ymlé…ç½®æ–‡ä»¶ 12345678910111213141516171819202122primarydb: uniqueResourceName: primary xaDataSourceClassName: com.mysql.jdbc.jdbc2.optional.MysqlXADataSource xaProperties: url: jdbc:mysql://localhost:3306/jdbc user: root password: Thwf1858 exclusiveConnectionMode: true minPoolSize: 3 maxPoolSize: 10 testQuery: SELECT 1 FROM dualsecondarydb: uniqueResourceName: secondary xaDataSourceClassName: com.mysql.jdbc.jdbc2.optional.MysqlXADataSource xaProperties: url: jdbc:mysql://localhost:3306/test user: root password: Thwf1858 exclusiveConnectionMode: true minPoolSize: 3 maxPoolSize: 10 testQuery: SELECT 1 FROM dual ç¼–å†™é…ç½®ç±»DataSourceConfig.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.haven.config;import com.atomikos.jdbc.AtomikosDataSourceBean;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.boot.jdbc.DataSourceBuilder;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.Primary;import org.springframework.jdbc.core.JdbcTemplate;import javax.sql.DataSource;import javax.xml.crypto.Data;/** * @author HavenTong * @date 2019/10/31 12:08 ä¸Šåˆ */@Configurationpublic class DataSourceConfig { // å¤šæ•°æ®æºï¼Œåˆ†å¸ƒå¼ @Bean(initMethod = \"init\", destroyMethod = \"close\", name = \"primaryDataSource\") @Primary @ConfigurationProperties(prefix = \"primarydb\") public DataSource primaryDataSource(){ return new AtomikosDataSourceBean(); } @Bean(initMethod = \"init\", destroyMethod = \"close\", name = \"secondaryDataSource\") @ConfigurationProperties(prefix = \"secondarydb\") public DataSource secondaryDataSource(){ return new AtomikosDataSourceBean(); } @Bean public JdbcTemplate primaryJdbcTemplate(@Qualifier(\"primaryDataSource\") DataSource primaryDataSource){ return new JdbcTemplate(primaryDataSource); } @Bean public JdbcTemplate secondaryJdbcTemplate(@Qualifier(\"secondaryDataSource\") DataSource secondaryDataSource){ return new JdbcTemplate(secondaryDataSource); }} é…ç½®äº‹åŠ¡ç®¡ç†å™¨â„¢ TransactionManagerConfig.java 12345678910111213141516171819202122232425262728293031323334353637383940414243package com.haven.config;import com.atomikos.icatch.jta.UserTransactionImp;import com.atomikos.icatch.jta.UserTransactionManager;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.DependsOn;import org.springframework.transaction.PlatformTransactionManager;import org.springframework.transaction.jta.JtaTransactionManager;import javax.transaction.SystemException;import javax.transaction.TransactionManager;import javax.transaction.UserTransaction;/** * @author HavenTong * @date 2019/10/31 3:57 ä¸‹åˆ */@Configurationpublic class TransactionManagerConfig { @Bean public UserTransaction userTransaction() throws SystemException { UserTransactionImp userTransactionImp = new UserTransactionImp(); userTransactionImp.setTransactionTimeout(10000); return userTransactionImp; } @Bean(name = \"atomikosTransactionManager\", initMethod = \"init\", destroyMethod = \"close\") public TransactionManager atomikosTransactionManager() throws Throwable{ UserTransactionManager userTransactionManager = new UserTransactionManager(); userTransactionManager.setForceShutdown(false); return userTransactionManager; } @Bean(name = \"transactionManager\") @DependsOn({\"userTransaction\", \"atomikosTransactionManger\"}) public PlatformTransactionManager transactionManager() throws Throwable{ UserTransaction userTransaction = userTransaction(); JtaTransactionManager manager = new JtaTransactionManager(userTransaction, atomikosTransactionManager()); return manager; }}","link":"/2019/10/31/Spring-Boot-JDBC/"},{"title":"SpringBooté…ç½®","text":"Spring Booté…ç½® 1. æ ‡è®°è¯­è¨€ ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼šxxx.xml YAML: ä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”json, xmlæ›´é€‚åˆä½œé…ç½®æ–‡ä»¶ï¼Œå®ä¾‹å¦‚ä¸‹ 12server: port: 8081 XML: 123&lt;server&gt; &lt;port&gt;8081&lt;/port&gt;&lt;/server&gt; 2. YAMLè¯­æ³• (1) åŸºæœ¬è¯­æ³• K :(ç©ºæ ¼)V â€” è¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ ä»¥ç©ºæ ¼çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œå·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€å±‚çº§ 123server: port: 8080 path: /hello å±æ€§å’Œå€¼å¤§å°å†™æ•æ„Ÿ (2) å€¼çš„å†™æ³• å­—é¢é‡ï¼šæ™®é€šçš„å€¼(æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”) k: v: å­—é¢é‡ç›´æ¥æ¥å†™ â€‹ å­—ç¬¦ä¸²é»˜è®¤ä¸éœ€è¦åŠ ä¸Šå•å¼•å·æˆ–åŒå¼•å· â€‹ åŒå¼•å·ï¼šä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œçš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ â€‹ name: &quot;zhangsan \\n lisi&quot;è¾“å‡ºzhangsan æ¢è¡Œ lisi â€‹ å•å¼•å·ï¼šä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸² â€‹ name: &quot;zhangsan \\n lisi&quot;è¾“å‡ºzhangsan \\n lisi å¯¹è±¡(å±æ€§å’Œå€¼): é”®å€¼å¯¹ k: v: å¯¹è±¡è¿˜æ˜¯k: vçš„æ¨¡å¼ 123friends: lastName: zhangsan age: 20 è¡Œå†…å†™æ³•ï¼š 1friends: {lastName: zhangsan, age: 18} æ•°ç»„(List, Set) ç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´  1234pets: - cat - dog - pig è¡Œå†…å†™æ³• 1pets: [cat, dog, pig ] 3. é…ç½®æ–‡ä»¶å€¼æ³¨å…¥ é…ç½®æ–‡ä»¶ï¼š 123456789101112131415server: port: 8081person: lastName: zhangsan age: 18 boss: false birthDay: 2017/12/12 maps: {k1: v1, k2: 12} list: - lisi - zhaoliu dog: name: myDog age: 2 javaBean: 123456789101112131415161718/** å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­* @ConfigurationPropertiesï¼šå‘Šè¯‰Spring Bootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š* prefix = \"person\"ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„** åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½* */@Component@ConfigurationProperties(prefix = \"person\")public class Person { private String lastName; private Integer age; private Boolean boss; private Date birthDay; private Dog dog; private Map&lt;String, Object&gt; maps; private List&lt;Object&gt; list; æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±å¯ä»¥æœ‰æç¤ºï¼š 123456&lt;!-- å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; @ConfigurationPropertiesè·å–å€¼å’Œ@Valueè·å–å€¼çš„åŒºåˆ« @ConfigurationProperties @Value åŠŸèƒ½ æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ ä¸€ä¸ªä¸€ä¸ªæŒ‡å®š æ¾æ•£ç»‘å®š(æ¾æ•£è¯­æ³•) æ”¯æŒæ¾æ•£è¯­æ³•ç»‘å®š ä¸æ”¯æŒæ¾æ•£è¯­æ³•ç»‘å®š SpEL ä¸æ”¯æŒ æ”¯æŒ JSR30æ•°æ®æ ¡éªŒ æ”¯æŒ ä¸æ”¯æŒ å¤æ‚ç±»å‹å°è£… æ”¯æŒ ä¸æ”¯æŒ é…ç½®æ–‡ä»¶ymlå’Œpropertieséƒ½å¯ä»¥è·å–å€¼ å¦‚æœåªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­ï¼Œéœ€è¦è·å–ä¸€ä¸‹æŸä¸ªé…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨@Value å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨@ConfigurationProperties é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ 1234567@Component@ConfigurationProperties(prefix = \"person\")@Validatedpublic class Person { // lastNameå¿…é¡»ä¸ºé‚®ç®±æ ¼å¼ @Email private String lastName; 4. @PropertySource&amp;ImportResource @PropertySourceï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ 123456789/** @ConfigurationProperties(prefix = \"person\")* é»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼* */@PropertySource(value = {\"classpath:person.properties\"})@Component@ConfigurationProperties(prefix = \"person\")//@Validatedpublic class Person { @ImportResourceï¼šå¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ç”Ÿæ•ˆ Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼› æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼› éœ€è¦å°†@ImportResourceæ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š 123456789@ImportResource(locations = {\"classpath:beans.xml\"})@SpringBootApplicationpublic class SpringBoot01HelloworldQuickApplication { public static void main(String[] args) { SpringApplication.run(SpringBoot01HelloworldQuickApplication.class, args); }} å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©å…¶ç”Ÿæ•ˆ ä½†ä¸å¸Œæœ›ç¼–å†™Springçš„é…ç½®æ–‡ä»¶ 12345678&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;bean class=\"com.haven.springboot.sevice.HelloService\" id=\"helloService\"&gt; &lt;/bean&gt;&lt;/beans&gt; SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼š æ¨èä½¿ç”¨å…¨æ³¨è§£æ–¹å¼ é…ç½®ç±»===Springé…ç½®æ–‡ä»¶ ä½¿ç”¨@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ 1234567891011121314151617/** @Configurationï¼šå‘Šè¯‰Spring Bootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»* å°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰Springçš„é…ç½®æ–‡ä»¶** ä¹‹å‰åœ¨Springé…ç½®æ–‡ä»¶ä¸­ç”¨ &lt;bean&gt;&lt;/bean&gt; æ ‡ç­¾æ·»åŠ ç»„ä»¶* */@Configurationpublic class MyAppConfig { // å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å @Bean public HelloService helloService02(){ System.out.println(\"é…ç½®ç±»@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶\"); return new HelloService(); }} 5. é…ç½®æ–‡ä»¶å ä½ç¬¦ (1) éšæœºæ•° 12${random.value}, ${random.int}, ${random.long}${random.int(10)}, ${random.int[1024, 65536]} (2) å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä½¿ç”¨:æŒ‡å®šé»˜è®¤å€¼ 123456789person.last-name=å¼ ä¸‰${random.uuid}person.age=${random.int}person.birth-day=2017/12/15person.boss=falseperson.maps.k1=v1person.maps.k2=14person.list=a,b,cperson.dog.name=${person.hello:hello}_dogperson.dog.age=15 6. Profile (1) å¤šProfileæ–‡ä»¶ æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™æ—¶ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯application-{profile}.properties/yml é»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½® (2)æ¿€æ´»æŒ‡å®šprofile åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šspring.profiles.active=dev å‘½ä»¤è¡Œ 1--spring.profiles.active=dev Edit Configurationâ€”&gt;Program arguments (3) ymlå¤šæ–‡æ¡£å— 123456789101112131415161718server: port: 8081spring: profiles: active: prod---server: port: 8083spring: profiles: dev---server: port: 8084spring: profiles: prod #æŒ‡å®šå±äºé‚£ä¸ªç¯å¢ƒ 7. é…ç½®æ–‡ä»¶åŠ è½½ä½ç½® ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œé«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼š ./config/ ./ ./src/main/resources/config/ ./src/main/resources/ SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼šäº’è¡¥é…ç½® å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶çš„ä½ç½® é¡¹ç›®æ‰“åŒ…å¥½åï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°--spring.config.location=?çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨ï¼Œå½¢æˆäº’è¡¥é…ç½® 8. è‡ªåŠ¨é…ç½®åŸç† é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§å‚ç…§ https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/common-application-properties.html è‡ªåŠ¨é…ç½®åŸç† SpringBootå¯åŠ¨æ—¶åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½@EnableAutoConfiguration @EnableAutoConfigurationåŸç† åˆ©ç”¨AutoConfigurationImportSelectorç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶ æŸ¥çœ‹AutoConfigurationImportSelectorä¸­çš„selectImports()æ–¹æ³• 12// è·å–å€™é€‰çš„é…ç½®List&lt;String&gt; configurations = this.getCandidateConfigurations(annotationMetadata, attributes); 12// getCandidateConfigurations()List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader()); 1234SpringFactoriesLoader.loadFactoryNames()// æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹çš„ META-INF/spring.factories// æŠŠæ‰«æåˆ°çš„æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡// ä»propertiesè·å–åˆ°EnableAutoConfiguration.classçš„ç±»åå¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å®¹å™¨ä¸­ å°†ç±»è·¯å¾„ä¸‹ META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼åŠ åˆ°äº†å®¹å™¨ä¸­ æ¯ä¸€ä¸ªè¿™æ ·çš„ xxxAutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œç”¨ä»–ä»¬åšè‡ªåŠ¨é…ç½®ã€‚ æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ HttpEncodingAutoConfiguration(HTTPç¼–ç è‡ªåŠ¨é…ç½®)ä¸ºä¾‹ï¼Œä»‹ç»è‡ªåŠ¨é…ç½®åŸç† 12345678910111213141516171819202122232425262728293031323334353637@Configuration // è¡¨ç¤ºæ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶@EnableConfigurationProperties({HttpProperties.class}) // å¯ç”¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›å°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼Œå¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­@ConditionalOnWebApplication( type = Type.SERVLET) // Springåº•å±‚@Conditionalæ³¨è§£ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›// åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å½“å‰é…ç½®ç±»ç”Ÿæ•ˆï¼›// åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»// CharacterEncodingFilterï¼šSpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨@ConditionalOnClass({CharacterEncodingFilter.class})// åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½® spring.http.encoding;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„// å³ä½¿é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®spring.http.encoding=enabledï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„@ConditionalOnProperty( prefix = \"spring.http.encoding\", value = {\"enabled\"}, matchIfMissing = true)public class HttpEncodingAutoConfiguration { // ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº† private final Encoding properties; // åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼ä¼šä»å®¹å™¨ä¸­æ‹¿ public HttpEncodingAutoConfiguration(HttpProperties properties) { this.properties = properties.getEncoding(); } @Bean // ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å– @ConditionalOnMissingBean public CharacterEncodingFilter characterEncodingFilter() { CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter(); filter.setEncoding(this.properties.getCharset().name()); filter.setForceRequestEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST)); filter.setForceResponseEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE)); return filter; } æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆã€‚ ä¸€æ—¦é…ç½®ç±»ç”Ÿæ•ˆï¼Œè¿™ä¸ªé…ç½®ç±»å°±ä¼šä¸ªå®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè€Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ã€‚ æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§ï¼Œéƒ½æ˜¯åœ¨xxxPropertiesç±»ä¸­å°è£…ç€ï¼›é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆï¼Œå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„å±æ€§ç±» 1234@ConfigurationProperties( prefix = \"spring.http\") // ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®špublic class HttpProperties { ç²¾é«“ SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„é…ç½®ç±» æˆ‘ä»¬çœ‹æˆ‘ä»¬çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»ï¼› å†çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®ï¼‰ ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶æ—¶ï¼Œä¼šä»propertieä¸­è·å–æŸäº›å±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼ xxxAutoConfigurationï¼šè‡ªåŠ¨é…ç½®ç±»ï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ xxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ 9. ç»†èŠ‚ 1. @Conditionalæ´¾ç”Ÿæ³¨è§£ ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®ç±»é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆ è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ é€šè¿‡ 1debug=true è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ åˆ†ä¸ºPositive matcheså’ŒNegative matches","link":"/2019/09/28/SpringBoot%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Moment","slug":"Moment","link":"/tags/Moment/"},{"name":"STL","slug":"STL","link":"/tags/STL/"},{"name":"Life","slug":"Life","link":"/tags/Life/"},{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","link":"/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"MongoDB","slug":"MongoDB","link":"/tags/MongoDB/"},{"name":"C++","slug":"C","link":"/tags/C/"},{"name":"Spring Boot","slug":"Spring-Boot","link":"/tags/Spring-Boot/"},{"name":"Algorithm","slug":"Algorithm","link":"/tags/Algorithm/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"Blog","slug":"Blog","link":"/tags/Blog/"},{"name":"redis","slug":"redis","link":"/tags/redis/"},{"name":"Java","slug":"Java","link":"/tags/Java/"}],"categories":[]}